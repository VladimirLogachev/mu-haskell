<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language ConstraintKinds       #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language DataKinds             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language FlexibleContexts      #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# language FlexibleInstances     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# language GADTs                 #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# language MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# language PolyKinds             #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# language RankNTypes            #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# language ScopedTypeVariables   #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# language TypeApplications      #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# language TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# language UndecidableInstances  #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-#&#160;OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-14"></span><span class="hs-comment">{-|
Description : Adapter for Avro serialization

Just import the module and you can turn any
value with a 'ToSchema' and 'FromSchema' from
and to Avro values.
-}</span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Mu.Adapter.Avro</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(***)</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Avro</span></span><span>                           </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Avro.Schema</span></span><span>                    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ASch</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Avro.Types.Value</span></span><span>               </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AVal</span></span><span>
</span><span id="line-27"></span><span class="hs-comment">-- 'Tagged . unTagged' can be replaced by 'coerce'</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- eliminating some run-time overhead</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span>                         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">coerce</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span>                 </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HM</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span>                  </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmptyList</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span>                            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Tagged</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                           </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span>                         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.TypeLits</span></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Mu.Schema</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Mu.Schema.Interpretation.Schemaless</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SLess</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span id="local-6989586621679154789"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SLess.ToSchemalessTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><a href="#local-6989586621679154789"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-43"></span><span>  </span><span id="local-6989586621679154786"><span class="annot"><span class="annottext">toSchemalessTerm :: Value t -&gt; Term
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toSchemalessTerm</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Record</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154783"><span class="annot"><span class="annottext">r :: HashMap Text (Value t)
</span><a href="#local-6989586621679154783"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Field] -&gt; Term
</span><span class="hs-identifier hs-var">SLess.TRecord</span></span><span> </span><span class="annot"><span class="annottext">([Field] -&gt; Term) -&gt; [Field] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Text, Value t) -&gt; Field) -&gt; [(Text, Value t)] -&gt; [Field]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679154781"><span class="annot"><span class="annottext">k :: Text
</span><a href="#local-6989586621679154781"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679154780"><span class="annot"><span class="annottext">v :: Value t
</span><a href="#local-6989586621679154780"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldValue -&gt; Field
</span><span class="hs-identifier hs-var">SLess.Field</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154781"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value t -&gt; FieldValue
forall t. ToSchemalessValue t =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.toSchemalessValue</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154780"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>                    </span><span class="annot"><span class="annottext">([(Text, Value t)] -&gt; [Field]) -&gt; [(Text, Value t)] -&gt; [Field]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value t) -&gt; [(Text, Value t)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HM.toList</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value t)
</span><a href="#local-6989586621679154783"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Enum</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154775"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621679154775"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Term
</span><span class="hs-identifier hs-var">SLess.TEnum</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679154775"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Union</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154772"><span class="annot"><span class="annottext">v :: Value t
</span><a href="#local-6989586621679154772"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value t -&gt; Term
forall t. ToSchemalessTerm t =&gt; t -&gt; Term
</span><span class="hs-identifier hs-var">SLess.toSchemalessTerm</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154772"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessTerm</span></span><span> </span><span id="local-6989586621679154771"><span class="annot"><span class="annottext">v :: Value t
</span><a href="#local-6989586621679154771"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue -&gt; Term
</span><span class="hs-identifier hs-var">SLess.TSimple</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value t -&gt; FieldValue
forall t. ToSchemalessValue t =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.toSchemalessValue</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154771"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span id="local-6989586621679154769"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SLess.ToSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><a href="#local-6989586621679154769"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-53"></span><span>  </span><span id="local-6989586621679154766"><span class="annot"><span class="annottext">toSchemalessValue :: Value t -&gt; FieldValue
</span><a href="#local-6989586621679154766"><span class="hs-identifier hs-var hs-var hs-var hs-var">toSchemalessValue</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AVal.Null</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue
</span><span class="hs-identifier hs-var">SLess.FNull</span></span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Boolean</span></span><span> </span><span id="local-6989586621679154762"><span class="annot"><span class="annottext">b :: Bool
</span><a href="#local-6989586621679154762"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679154762"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Int</span></span><span> </span><span id="local-6989586621679154759"><span class="annot"><span class="annottext">b :: Int32
</span><a href="#local-6989586621679154759"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621679154759"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Long</span></span><span> </span><span id="local-6989586621679154757"><span class="annot"><span class="annottext">b :: Int64
</span><a href="#local-6989586621679154757"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621679154757"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Float</span></span><span> </span><span id="local-6989586621679154755"><span class="annot"><span class="annottext">b :: Float
</span><a href="#local-6989586621679154755"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621679154755"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Double</span></span><span> </span><span id="local-6989586621679154753"><span class="annot"><span class="annottext">b :: Double
</span><a href="#local-6989586621679154753"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679154753"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.String</span></span><span> </span><span id="local-6989586621679154751"><span class="annot"><span class="annottext">b :: Text
</span><a href="#local-6989586621679154751"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154751"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Fixed</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154749"><span class="annot"><span class="annottext">b :: ByteString
</span><a href="#local-6989586621679154749"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679154749"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Bytes</span></span><span> </span><span id="local-6989586621679154747"><span class="annot"><span class="annottext">b :: ByteString
</span><a href="#local-6989586621679154747"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679154747"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Array</span></span><span> </span><span id="local-6989586621679154745"><span class="annot"><span class="annottext">v :: Vector (Value t)
</span><a href="#local-6989586621679154745"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldValue] -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FList</span></span><span> </span><span class="annot"><span class="annottext">([FieldValue] -&gt; FieldValue) -&gt; [FieldValue] -&gt; FieldValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Value t -&gt; FieldValue) -&gt; [Value t] -&gt; [FieldValue]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Value t -&gt; FieldValue
forall t. ToSchemalessValue t =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.toSchemalessValue</span></span><span> </span><span class="annot"><span class="annottext">([Value t] -&gt; [FieldValue]) -&gt; [Value t] -&gt; [FieldValue]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vector (Value t) -&gt; [Value t]
forall a. Vector a -&gt; [a]
</span><span class="hs-identifier hs-var">V.toList</span></span><span> </span><span class="annot"><span class="annottext">Vector (Value t)
</span><a href="#local-6989586621679154745"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Map</span></span><span> </span><span id="local-6989586621679154741"><span class="annot"><span class="annottext">hm :: HashMap Text (Value t)
</span><a href="#local-6989586621679154741"><span class="hs-identifier hs-var">hm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map FieldValue FieldValue -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FMap</span></span><span> </span><span class="annot"><span class="annottext">(Map FieldValue FieldValue -&gt; FieldValue)
-&gt; Map FieldValue FieldValue -&gt; FieldValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(FieldValue, FieldValue)] -&gt; Map FieldValue FieldValue
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span>
</span><span id="line-66"></span><span>                 </span><span class="annot"><span class="annottext">([(FieldValue, FieldValue)] -&gt; Map FieldValue FieldValue)
-&gt; [(FieldValue, FieldValue)] -&gt; Map FieldValue FieldValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Text, Value t) -&gt; (FieldValue, FieldValue))
-&gt; [(Text, Value t)] -&gt; [(FieldValue, FieldValue)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldValue
forall t. (Typeable t, Eq t, Ord t, Show t) =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldValue)
-&gt; (Value t -&gt; FieldValue)
-&gt; (Text, Value t)
-&gt; (FieldValue, FieldValue)
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">Value t -&gt; FieldValue
forall t. ToSchemalessValue t =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.toSchemalessValue</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>                 </span><span class="annot"><span class="annottext">([(Text, Value t)] -&gt; [(FieldValue, FieldValue)])
-&gt; [(Text, Value t)] -&gt; [(FieldValue, FieldValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value t) -&gt; [(Text, Value t)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HM.toList</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value t)
</span><a href="#local-6989586621679154741"><span class="hs-identifier hs-var">hm</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Union</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154738"><span class="annot"><span class="annottext">v :: Value t
</span><a href="#local-6989586621679154738"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value t -&gt; FieldValue
forall t. ToSchemalessValue t =&gt; t -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.toSchemalessValue</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154738"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span id="local-6989586621679154737"><span class="annot"><span class="annottext">r :: Value t
</span><a href="#local-6989586621679154737"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Record</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FSchematic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value t -&gt; Term
forall t. ToSchemalessTerm t =&gt; t -&gt; Term
</span><span class="hs-identifier hs-var">SLess.toSchemalessTerm</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154737"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toSchemalessValue</span></span><span> </span><span id="local-6989586621679154735"><span class="annot"><span class="annottext">e :: Value t
</span><a href="#local-6989586621679154735"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">AVal.Enum</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; FieldValue
</span><span class="hs-identifier hs-var">SLess.FSchematic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value t -&gt; Term
forall t. ToSchemalessTerm t =&gt; t -&gt; Term
</span><span class="hs-identifier hs-var">SLess.toSchemalessTerm</span></span><span> </span><span class="annot"><span class="annottext">Value t
</span><a href="#local-6989586621679154735"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621679154732"><span id="local-6989586621679154733"><span id="local-6989586621679154734"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.HasAvroSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154734"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154734"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154733"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.HasAvroSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154734"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154733"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154732"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>  </span><span id="local-6989586621679154729"><span class="annot"><span class="annottext">schema :: Tagged (WithSchema sch sty t) Schema
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">schema</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (Term sch (sch :/: sty)) Schema
-&gt; Tagged (WithSchema sch sty t) Schema
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (Term sch (sch :/: sty)) Schema
 -&gt; Tagged (WithSchema sch sty t) Schema)
-&gt; Tagged (Term sch (sch :/: sty)) Schema
-&gt; Tagged (WithSchema sch sty t) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasAvroSchema (Term sch (sch :/: sty)) =&gt;
Tagged (Term sch (sch :/: sty)) Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154734"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154734"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154733"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-78"></span><span id="local-6989586621679154725"><span id="local-6989586621679154726"><span id="local-6989586621679154727"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154727"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154726"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154725"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-79"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154727"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154727"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154726"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154727"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154726"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154725"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621679154721"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (WithSchema sch sty t)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></span></span><span> </span><span id="local-6989586621679154719"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154719"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; WithSchema sch sty t
forall tn fn (sch :: Schema tn fn) (sty :: tn) a.
a -&gt; WithSchema sch sty a
</span><span class="hs-identifier hs-var">WithSchema</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; WithSchema sch sty t)
-&gt; (Term sch (sch :/: sty) -&gt; t)
-&gt; Term sch (sch :/: sty)
-&gt; WithSchema sch sty t
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall t (sty :: tn).
FromSchema sch sty t =&gt;
Term sch (sch :/: sty) -&gt; t
forall fn tn (sch :: Schema tn fn) t (sty :: tn).
FromSchema sch sty t =&gt;
Term sch (sch :/: sty) -&gt; t
</span><span class="hs-identifier hs-var">fromSchema'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154727"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="annottext">(Term sch (sch :/: sty) -&gt; WithSchema sch sty t)
-&gt; Result (Term sch (sch :/: sty)) -&gt; Result (WithSchema sch sty t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (Term sch (sch :/: sty))
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154719"><span class="hs-identifier hs-var">v</span></a></span></span></span></span><span>
</span><span id="line-82"></span><span id="local-6989586621679154712"><span id="local-6989586621679154713"><span id="local-6989586621679154714"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154714"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154713"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154712"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-83"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154714"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154714"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154713"><span class="hs-identifier hs-type">sty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154714"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154713"><span class="hs-identifier hs-type">sty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154712"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-85"></span><span>  </span><span id="local-6989586621679154708"><span class="annot"><span class="annottext">toAvro :: WithSchema sch sty t -&gt; Value Schema
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSchema</span></span><span> </span><span id="local-6989586621679154706"><span class="annot"><span class="annottext">v :: t
</span><a href="#local-6989586621679154706"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term sch (sch :/: sty) -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; Term sch (sch :/: sty)
forall fn tn (sch :: Schema tn fn) t (sty :: tn).
ToSchema sch sty t =&gt;
t -&gt; Term sch (sch :/: sty)
</span><span class="hs-identifier hs-var">toSchema'</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154714"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679154706"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- HasAvroSchema instances</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-keyword">class</span><span> </span><span id="HasAvroSchema%27"><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-var">HasAvroSchema'</span></a></span></span><span> </span><span id="local-6989586621679155142"><span class="annot"><a href="#local-6989586621679155142"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>  </span><span id="schema%27"><span class="annot"><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-type">schema'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ASch.TypeName</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tagged</span></span><span> </span><span class="annot"><a href="#local-6989586621679155142"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span id="local-6989586621679154702"><span id="local-6989586621679154703"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154703"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154702"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.HasAvroSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154703"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154702"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621679154700"><span class="annot"><span class="annottext">schema :: Tagged (Term sch t) Schema
</span><a href="#local-6989586621679154700"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (Term sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-95"></span><span id="local-6989586621679154698"><span id="local-6989586621679154699"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154699"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154698"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.HasAvroSchema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154699"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154698"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679154696"><span class="annot"><span class="annottext">schema :: Tagged (FieldValue sch t) Schema
</span><a href="#local-6989586621679154696"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span id="local-6989586621679154693"><span id="local-6989586621679154694"><span id="local-6989586621679154695"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154695"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154694"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154693"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154694"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DRecord</span></span><span> </span><span class="annot"><a href="#local-6989586621679154695"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154693"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621679154690"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (Term sch ('DRecord name args)) Schema
</span><a href="#local-6989586621679154690"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154689"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154689"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154688"><span class="hs-identifier hs-var">recordName</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; [TypeName] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154689"><span class="hs-identifier hs-var">visited</span></a></span><span>
</span><span id="line-103"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema)
-&gt; Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.NamedType</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154688"><span class="hs-identifier hs-var">recordName</span></a></span><span>
</span><span id="line-104"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema)
-&gt; Schema -&gt; Tagged (Term sch ('DRecord name args)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeName
-&gt; [TypeName] -&gt; Maybe Text -&gt; Maybe Order -&gt; [Field] -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.Record</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154688"><span class="hs-identifier hs-var">recordName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Order
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[Field]
</span><a href="#local-6989586621679154683"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154688"><span class="annot"><span class="annottext">recordName :: TypeName
</span><a href="#local-6989586621679154688"><span class="hs-identifier hs-var hs-var">recordName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; TypeName
forall k (s :: k) (proxy :: k -&gt; *).
KnownName s =&gt;
proxy s -&gt; TypeName
</span><a href="Mu.Adapter.Avro.html#nameTypeName"><span class="hs-identifier hs-var">nameTypeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154695"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>          </span><span id="local-6989586621679154683"><span class="annot"><span class="annottext">fields :: [Field]
</span><a href="#local-6989586621679154683"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy sch -&gt; Proxy args -&gt; [TypeName] -&gt; [Field]
forall k tn fn (sch :: k) (fs :: [FieldDef tn fn]).
HasAvroSchemaFields sch fs =&gt;
Proxy sch -&gt; Proxy fs -&gt; [TypeName] -&gt; [Field]
</span><a href="Mu.Adapter.Avro.html#schemaF"><span class="hs-identifier hs-var">schemaF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy sch
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154694"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy args
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154693"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154689"><span class="hs-identifier hs-var">visited</span></a></span></span></span></span><span>
</span><span id="line-107"></span><span id="local-6989586621679154677"><span id="local-6989586621679154678"><span id="local-6989586621679154679"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154679"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154678"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154677"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DEnum</span></span><span> </span><span class="annot"><a href="#local-6989586621679154679"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154678"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621679154675"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (Term sch ('DEnum name choices)) Schema
</span><a href="#local-6989586621679154675"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154674"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154674"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154673"><span class="hs-identifier hs-var">enumName</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; [TypeName] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154674"><span class="hs-identifier hs-var">visited</span></a></span><span>
</span><span id="line-111"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema)
-&gt; Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.NamedType</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154673"><span class="hs-identifier hs-var">enumName</span></a></span><span>
</span><span id="line-112"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema)
-&gt; Schema -&gt; Tagged (Term sch ('DEnum name choices)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; [TypeName] -&gt; Maybe Text -&gt; [Text] -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.mkEnum</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621679154673"><span class="hs-identifier hs-var">enumName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679154671"><span class="hs-identifier hs-var">choicesNames</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154673"><span class="annot"><span class="annottext">enumName :: TypeName
</span><a href="#local-6989586621679154673"><span class="hs-identifier hs-var hs-var">enumName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; TypeName
forall k (s :: k) (proxy :: k -&gt; *).
KnownName s =&gt;
proxy s -&gt; TypeName
</span><a href="Mu.Adapter.Avro.html#nameTypeName"><span class="hs-identifier hs-var">nameTypeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154679"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>          </span><span id="local-6989586621679154671"><span class="annot"><span class="annottext">choicesNames :: [Text]
</span><a href="#local-6989586621679154671"><span class="hs-identifier hs-var hs-var">choicesNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy choices -&gt; [Text]
forall fn (fs :: [ChoiceDef fn]).
HasAvroSchemaEnum fs =&gt;
Proxy fs -&gt; [Text]
</span><a href="Mu.Adapter.Avro.html#schemaE"><span class="hs-identifier hs-var">schemaE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy choices
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154678"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-115"></span><span id="local-6989586621679154668"><span id="local-6989586621679154669"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154669"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154668"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154669"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DSimple</span></span><span> </span><span class="annot"><a href="#local-6989586621679154668"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621679154666"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (Term sch ('DSimple t)) Schema
</span><a href="#local-6989586621679154666"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154665"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154665"><span class="hs-identifier hs-var">visited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch t) Schema
-&gt; Tagged (Term sch ('DSimple t)) Schema
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch t) Schema
 -&gt; Tagged (Term sch ('DSimple t)) Schema)
-&gt; Tagged (FieldValue sch t) Schema
-&gt; Tagged (Term sch ('DSimple t)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154669"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154668"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154665"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span id="local-6989586621679154664"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154664"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TNull</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>  </span><span id="local-6989586621679154662"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch 'TNull) Schema
</span><a href="#local-6989586621679154662"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (FieldValue sch 'TNull) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><span class="hs-identifier hs-var">ASch.Null</span></span></span><span>
</span><span id="line-121"></span><span id="local-6989586621679154659"><span id="local-6989586621679154660"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.HasAvroSchema</span></span><span> </span><span class="annot"><a href="#local-6989586621679154660"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-122"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154659"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><a href="#local-6989586621679154660"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621679154657"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch ('TPrimitive t)) Schema
</span><a href="#local-6989586621679154657"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged t Schema -&gt; Tagged (FieldValue sch ('TPrimitive t)) Schema
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(Tagged t Schema -&gt; Tagged (FieldValue sch ('TPrimitive t)) Schema)
-&gt; Tagged t Schema
-&gt; Tagged (FieldValue sch ('TPrimitive t)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasAvroSchema t =&gt; Tagged t Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154660"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-124"></span><span id="local-6989586621679154655"><span id="local-6989586621679154656"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154656"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154656"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154655"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154656"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TSchematic</span></span><span> </span><span class="annot"><a href="#local-6989586621679154655"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621679154653"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch ('TSchematic t)) Schema
</span><a href="#local-6989586621679154653"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154652"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154652"><span class="hs-identifier hs-var">visited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (Term sch (sch :/: t)) Schema
-&gt; Tagged (FieldValue sch ('TSchematic t)) Schema
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (Term sch (sch :/: t)) Schema
 -&gt; Tagged (FieldValue sch ('TSchematic t)) Schema)
-&gt; Tagged (Term sch (sch :/: t)) Schema
-&gt; Tagged (FieldValue sch ('TSchematic t)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (Term sch (sch :/: t)) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154656"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154656"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154655"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154652"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679154650"><span class="annot"><a href="#local-6989586621679154650"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span id="local-6989586621679154649"><span class="annot"><a href="#local-6989586621679154649"><span class="hs-identifier hs-type">choices</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-128"></span><span>         </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154650"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154649"><span class="hs-identifier hs-type">choices</span></a></span><span>
</span><span id="line-129"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154650"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TUnion</span></span><span> </span><span class="annot"><a href="#local-6989586621679154649"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621679154648"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch ('TUnion choices)) Schema
</span><a href="#local-6989586621679154648"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154647"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154647"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (FieldValue sch ('TUnion choices)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (FieldValue sch ('TUnion choices)) Schema)
-&gt; Schema -&gt; Tagged (FieldValue sch ('TUnion choices)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Schema -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.mkUnion</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Schema -&gt; Schema) -&gt; NonEmpty Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proxy (FieldValue sch)
-&gt; Proxy choices -&gt; [TypeName] -&gt; NonEmpty Schema
forall k (f :: k -&gt; *) (xs :: [k]).
HasAvroSchemaUnion f xs =&gt;
Proxy f -&gt; Proxy xs -&gt; [TypeName] -&gt; NonEmpty Schema
</span><a href="Mu.Adapter.Avro.html#schemaU"><span class="hs-identifier hs-var">schemaU</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (FieldValue sch)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154650"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy choices
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154649"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154647"><span class="hs-identifier hs-var">visited</span></a></span><span>
</span><span id="line-132"></span><span id="local-6989586621679154643"><span id="local-6989586621679154644"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154644"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154643"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154644"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TOption</span></span><span> </span><span class="annot"><a href="#local-6989586621679154643"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-134"></span><span>  </span><span id="local-6989586621679154641"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch ('TOption t)) Schema
</span><a href="#local-6989586621679154641"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154640"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154640"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (FieldValue sch ('TOption t)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (FieldValue sch ('TOption t)) Schema)
-&gt; Schema -&gt; Tagged (FieldValue sch ('TOption t)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Schema -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.mkUnion</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Schema -&gt; Schema) -&gt; NonEmpty Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><span class="hs-identifier hs-var">ASch.Null</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; [Schema] -&gt; NonEmpty Schema
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154638"><span class="hs-identifier hs-var">iSchema</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154638"><span class="annot"><span class="annottext">iSchema :: Schema
</span><a href="#local-6989586621679154638"><span class="hs-identifier hs-var hs-var">iSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch t) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch t) Schema -&gt; Schema)
-&gt; Tagged (FieldValue sch t) Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154644"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154643"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154640"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-137"></span><span id="local-6989586621679154635"><span id="local-6989586621679154636"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154636"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154635"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154636"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TList</span></span><span> </span><span class="annot"><a href="#local-6989586621679154635"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679154633"><span class="annot"><span class="annottext">schema' :: [TypeName] -&gt; Tagged (FieldValue sch ('TList t)) Schema
</span><a href="#local-6989586621679154633"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154632"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154632"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Tagged (FieldValue sch ('TList t)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema -&gt; Tagged (FieldValue sch ('TList t)) Schema)
-&gt; Schema -&gt; Tagged (FieldValue sch ('TList t)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.Array</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154630"><span class="hs-identifier hs-var">iSchema</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154630"><span class="annot"><span class="annottext">iSchema :: Schema
</span><a href="#local-6989586621679154630"><span class="hs-identifier hs-var hs-var">iSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch t) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch t) Schema -&gt; Schema)
-&gt; Tagged (FieldValue sch t) Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154636"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154635"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154632"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-142"></span><span class="hs-comment">-- These are the only two versions of Map supported by the library</span><span>
</span><span id="line-143"></span><span id="local-6989586621679154628"><span id="local-6989586621679154629"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154629"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154628"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154629"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154628"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679154626"><span class="annot"><span class="annottext">schema' :: [TypeName]
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive Text) v)) Schema
</span><a href="#local-6989586621679154626"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154625"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154625"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive Text) v)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema
 -&gt; Tagged (FieldValue sch ('TMap ('TPrimitive Text) v)) Schema)
-&gt; Schema
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive Text) v)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.Map</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154623"><span class="hs-identifier hs-var">iSchema</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154623"><span class="annot"><span class="annottext">iSchema :: Schema
</span><a href="#local-6989586621679154623"><span class="hs-identifier hs-var hs-var">iSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch v) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch v) Schema -&gt; Schema)
-&gt; Tagged (FieldValue sch v) Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch v) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154629"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154628"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154625"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-148"></span><span id="local-6989586621679154621"><span id="local-6989586621679154622"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154622"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154621"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154622"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154621"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621679154619"><span class="annot"><span class="annottext">schema' :: [TypeName]
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive String) v)) Schema
</span><a href="#local-6989586621679154619"><span class="hs-identifier hs-var hs-var hs-var hs-var">schema'</span></a></span></span><span> </span><span id="local-6989586621679154618"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154618"><span class="hs-identifier hs-var">visited</span></a></span></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive String) v)) Schema
forall k (s :: k) b. b -&gt; Tagged s b
</span><span class="hs-identifier hs-var">Tagged</span></span><span> </span><span class="annot"><span class="annottext">(Schema
 -&gt; Tagged (FieldValue sch ('TMap ('TPrimitive String) v)) Schema)
-&gt; Schema
-&gt; Tagged (FieldValue sch ('TMap ('TPrimitive String) v)) Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Schema
</span><span class="hs-identifier hs-var">ASch.Map</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154617"><span class="hs-identifier hs-var">iSchema</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154617"><span class="annot"><span class="annottext">iSchema :: Schema
</span><a href="#local-6989586621679154617"><span class="hs-identifier hs-var hs-var">iSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch v) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch v) Schema -&gt; Schema)
-&gt; Tagged (FieldValue sch v) Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch v) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154622"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154621"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154618"><span class="hs-identifier hs-var">visited</span></a></span></span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">class</span><span> </span><span id="HasAvroSchemaUnion"><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-var">HasAvroSchemaUnion</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679155071"><span class="annot"><a href="#local-6989586621679155071"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621679155072"><span class="annot"><a href="#local-6989586621679155072"><span class="hs-identifier hs-type hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-operator">*</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679155070"><span class="annot"><a href="#local-6989586621679155070"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679155072"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span id="schemaU"><span class="annot"><a href="Mu.Adapter.Avro.html#schemaU"><span class="hs-identifier hs-type">schemaU</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679155071"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679155070"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ASch.TypeName</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span>
</span><span id="line-156"></span><span id="local-6989586621679154615"><span id="local-6989586621679154616"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154616"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154615"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154616"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679154615"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679154612"><span class="annot"><span class="annottext">schemaU :: Proxy f -&gt; Proxy '[v] -&gt; [TypeName] -&gt; NonEmpty Schema
</span><a href="#local-6989586621679154612"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaU</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154611"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154611"><span class="hs-identifier hs-var">visited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154610"><span class="hs-identifier hs-var">vSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; [Schema] -&gt; NonEmpty Schema
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154610"><span class="annot"><span class="annottext">vSchema :: Schema
</span><a href="#local-6989586621679154610"><span class="hs-identifier hs-var hs-var">vSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (f v) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (f v) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154616"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154615"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154611"><span class="hs-identifier hs-var">visited</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-159"></span><span id="local-6989586621679154606"><span id="local-6989586621679154607"><span id="local-6989586621679154608"><span id="local-6989586621679154609"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154609"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154608"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154609"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154607"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154606"><span class="hs-identifier hs-type">zs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154609"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154608"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154607"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154606"><span class="hs-identifier hs-type">zs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621679154604"><span class="annot"><span class="annottext">schemaU :: Proxy f -&gt; Proxy (x : y : zs) -&gt; [TypeName] -&gt; NonEmpty Schema
</span><a href="#local-6989586621679154604"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaU</span></a></span></span><span> </span><span id="local-6989586621679154603"><span class="annot"><span class="annottext">p :: Proxy f
</span><a href="#local-6989586621679154603"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154602"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154602"><span class="hs-identifier hs-var">visited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154601"><span class="hs-identifier hs-var">xSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; [Schema] -&gt; NonEmpty Schema
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Schema -&gt; [Schema]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NonEmptyList.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Schema
</span><a href="#local-6989586621679154599"><span class="hs-identifier hs-var">yzsSchema</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154601"><span class="annot"><span class="annottext">xSchema :: Schema
</span><a href="#local-6989586621679154601"><span class="hs-identifier hs-var hs-var">xSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (f x) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (f x) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154609"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154608"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154602"><span class="hs-identifier hs-var">visited</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>          </span><span id="local-6989586621679154599"><span class="annot"><span class="annottext">yzsSchema :: NonEmpty Schema
</span><a href="#local-6989586621679154599"><span class="hs-identifier hs-var hs-var">yzsSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy f -&gt; Proxy (y : zs) -&gt; [TypeName] -&gt; NonEmpty Schema
forall k (f :: k -&gt; *) (xs :: [k]).
HasAvroSchemaUnion f xs =&gt;
Proxy f -&gt; Proxy xs -&gt; [TypeName] -&gt; NonEmpty Schema
</span><a href="Mu.Adapter.Avro.html#schemaU"><span class="hs-identifier hs-var">schemaU</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy f
</span><a href="#local-6989586621679154603"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (y : zs)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154607"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154606"><span class="hs-identifier hs-type">zs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154602"><span class="hs-identifier hs-var">visited</span></a></span></span></span></span></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-keyword">class</span><span> </span><span id="HasAvroSchemaFields"><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-var">HasAvroSchemaFields</span></a></span></span><span> </span><span id="local-6989586621679155110"><span class="annot"><a href="#local-6989586621679155110"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679155109"><span class="annot"><a href="#local-6989586621679155109"><span class="hs-identifier hs-type">fs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span id="local-6989586621679155112"><span class="annot"><a href="#local-6989586621679155112"><span class="hs-identifier hs-type hs-type">tn</span></a></span></span><span> </span><span id="local-6989586621679155111"><span class="annot"><a href="#local-6989586621679155111"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span id="schemaF"><span class="annot"><a href="Mu.Adapter.Avro.html#schemaF"><span class="hs-identifier hs-type">schemaF</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679155110"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679155109"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ASch.TypeName</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ASch.Field</span></span><span class="hs-special">]</span><span>
</span><span id="line-167"></span><span id="local-6989586621679154598"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154598"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>  </span><span id="local-6989586621679154595"><span class="annot"><span class="annottext">schemaF :: Proxy sch -&gt; Proxy '[] -&gt; [TypeName] -&gt; [Field]
</span><a href="#local-6989586621679154595"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaF</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>
</span><span id="line-169"></span><span id="local-6989586621679154591"><span id="local-6989586621679154592"><span id="local-6989586621679154593"><span id="local-6989586621679154594"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154594"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154593"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154592"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154593"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154591"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154593"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span class="annot"><a href="#local-6989586621679154594"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154592"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154591"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621679154589"><span class="annot"><span class="annottext">schemaF :: Proxy sch -&gt; Proxy ('FieldDef name t : fs) -&gt; [TypeName] -&gt; [Field]
</span><a href="#local-6989586621679154589"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaF</span></a></span></span><span> </span><span id="local-6989586621679154588"><span class="annot"><span class="annottext">psch :: Proxy sch
</span><a href="#local-6989586621679154588"><span class="hs-identifier hs-var">psch</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154587"><span class="annot"><span class="annottext">visited :: [TypeName]
</span><a href="#local-6989586621679154587"><span class="hs-identifier hs-var">visited</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Field
</span><a href="#local-6989586621679154586"><span class="hs-identifier hs-var">schemaThis</span></a></span><span> </span><span class="annot"><span class="annottext">Field -&gt; [Field] -&gt; [Field]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy sch -&gt; Proxy fs -&gt; [TypeName] -&gt; [Field]
forall k tn fn (sch :: k) (fs :: [FieldDef tn fn]).
HasAvroSchemaFields sch fs =&gt;
Proxy sch -&gt; Proxy fs -&gt; [TypeName] -&gt; [Field]
</span><a href="Mu.Adapter.Avro.html#schemaF"><span class="hs-identifier hs-var">schemaF</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy sch
</span><a href="#local-6989586621679154588"><span class="hs-identifier hs-var">psch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy fs
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154591"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154587"><span class="hs-identifier hs-var">visited</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154585"><span class="annot"><span class="annottext">fieldName :: Text
</span><a href="#local-6989586621679154585"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154594"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>          </span><span id="local-6989586621679154583"><span class="annot"><span class="annottext">schemaT :: Schema
</span><a href="#local-6989586621679154583"><span class="hs-identifier hs-var hs-var">schemaT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (FieldValue sch t) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="annot"><span class="annottext">(Tagged (FieldValue sch t) Schema -&gt; Schema)
-&gt; Tagged (FieldValue sch t) Schema -&gt; Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeName] -&gt; Tagged (FieldValue sch t) Schema
forall k (x :: k).
HasAvroSchema' x =&gt;
[TypeName] -&gt; Tagged x Schema
</span><a href="Mu.Adapter.Avro.html#schema%27"><span class="hs-identifier hs-var">schema'</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154593"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154592"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeName]
</span><a href="#local-6989586621679154587"><span class="hs-identifier hs-var">visited</span></a></span><span>
</span><span id="line-174"></span><span>          </span><span id="local-6989586621679154586"><span class="annot"><span class="annottext">schemaThis :: Field
</span><a href="#local-6989586621679154586"><span class="hs-identifier hs-var hs-var">schemaThis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; [Text]
-&gt; Maybe Text
-&gt; Maybe Order
-&gt; Schema
-&gt; Maybe (Value Schema)
-&gt; Field
</span><span class="hs-identifier hs-var">ASch.Field</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154585"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Order
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154583"><span class="hs-identifier hs-var">schemaT</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Value Schema)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span></span></span></span></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">class</span><span> </span><span id="HasAvroSchemaEnum"><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-var">HasAvroSchemaEnum</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679155099"><span class="annot"><a href="#local-6989586621679155099"><span class="hs-identifier hs-type">fs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ChoiceDef</span></span><span> </span><span id="local-6989586621679155100"><span class="annot"><a href="#local-6989586621679155100"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>  </span><span id="schemaE"><span class="annot"><a href="Mu.Adapter.Avro.html#schemaE"><span class="hs-identifier hs-type">schemaE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679155099"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-178"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621679154579"><span class="annot"><span class="annottext">schemaE :: Proxy '[] -&gt; [Text]
</span><a href="#local-6989586621679154579"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaE</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-180"></span><span id="local-6989586621679154577"><span id="local-6989586621679154578"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154578"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154577"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ChoiceDef</span></span><span> </span><span class="annot"><a href="#local-6989586621679154578"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154577"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>  </span><span id="local-6989586621679154575"><span class="annot"><span class="annottext">schemaE :: Proxy ('ChoiceDef name : fs) -&gt; [Text]
</span><a href="#local-6989586621679154575"><span class="hs-identifier hs-var hs-var hs-var hs-var">schemaE</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154578"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Proxy fs -&gt; [Text]
forall fn (fs :: [ChoiceDef fn]).
HasAvroSchemaEnum fs =&gt;
Proxy fs -&gt; [Text]
</span><a href="Mu.Adapter.Avro.html#schemaE"><span class="hs-identifier hs-var">schemaE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy fs
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154577"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- FromAvro instances</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span id="local-6989586621679154572"><span id="local-6989586621679154573"><span id="local-6989586621679154574"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154574"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154573"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154572"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroFields"><span class="hs-identifier hs-type">FromAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154573"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154572"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154573"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DRecord</span></span><span> </span><span class="annot"><a href="#local-6989586621679154574"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154572"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621679154569"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (Term sch ('DRecord name args))
</span><a href="#local-6989586621679154569"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Record</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154568"><span class="annot"><span class="annottext">fields :: HashMap Text (Value Schema)
</span><a href="#local-6989586621679154568"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP (Field sch) args -&gt; Term sch ('DRecord name args)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (args :: [FieldDef typeName fieldName]) (name :: typeName).
NP (Field sch) args -&gt; Term sch ('DRecord name args)
</span><span class="hs-identifier hs-var">TRecord</span></span><span> </span><span class="annot"><span class="annottext">(NP (Field sch) args -&gt; Term sch ('DRecord name args))
-&gt; Result (NP (Field sch) args)
-&gt; Result (Term sch ('DRecord name args))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema) -&gt; Result (NP (Field sch) args)
forall (sch :: Schema Symbol Symbol)
       (fs :: [FieldDef Symbol Symbol]).
FromAvroFields sch fs =&gt;
HashMap Text (Value Schema) -&gt; Result (NP (Field sch) fs)
</span><a href="Mu.Adapter.Avro.html#fromAvroF"><span class="hs-identifier hs-var">fromAvroF</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
</span><a href="#local-6989586621679154568"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">fromAvro</span></span><span> </span><span id="local-6989586621679154565"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154565"><span class="hs-identifier hs-var">v</span></a></span></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (Term sch ('DRecord name args))
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154565"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;record&quot;</span></span></span></span></span><span>
</span><span id="line-190"></span><span id="local-6989586621679154561"><span id="local-6989586621679154562"><span id="local-6989586621679154563"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154563"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154562"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroEnum"><span class="hs-identifier hs-type">FromAvroEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154562"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154561"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DEnum</span></span><span> </span><span class="annot"><a href="#local-6989586621679154563"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154562"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621679154558"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (Term sch ('DEnum name choices))
</span><a href="#local-6989586621679154558"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154557"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154557"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Enum</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154556"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679154556"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS Proxy choices -&gt; Term sch ('DEnum name choices)
forall fieldName typeName (choices :: [ChoiceDef fieldName])
       (sch :: Schema typeName fieldName) (name :: typeName).
NS Proxy choices -&gt; Term sch ('DEnum name choices)
</span><span class="hs-identifier hs-var">TEnum</span></span><span> </span><span class="annot"><span class="annottext">(NS Proxy choices -&gt; Term sch ('DEnum name choices))
-&gt; Result (NS Proxy choices)
-&gt; Result (Term sch ('DEnum name choices))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Int -&gt; Result (NS Proxy choices)
forall fn (vs :: [ChoiceDef fn]).
FromAvroEnum vs =&gt;
Value Schema -&gt; Int -&gt; Result (NS Proxy vs)
</span><a href="Mu.Adapter.Avro.html#fromAvroEnum"><span class="hs-identifier hs-var">fromAvroEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154557"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679154556"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">fromAvro</span></span><span> </span><span id="local-6989586621679154553"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154553"><span class="hs-identifier hs-var">v</span></a></span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (Term sch ('DEnum name choices))
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154553"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;enum&quot;</span></span></span></span></span><span>
</span><span id="line-194"></span><span id="local-6989586621679154551"><span id="local-6989586621679154552"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154552"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154551"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154552"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154551"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154552"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DSimple</span></span><span> </span><span class="annot"><a href="#local-6989586621679154551"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-196"></span><span>  </span><span id="local-6989586621679154548"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (Term sch ('DSimple t))
</span><a href="#local-6989586621679154548"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154547"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154547"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue sch t -&gt; Term sch ('DSimple t)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (t1 :: FieldType typeName).
FieldValue sch t1 -&gt; Term sch ('DSimple t1)
</span><span class="hs-identifier hs-var">TSimple</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch t -&gt; Term sch ('DSimple t))
-&gt; Result (FieldValue sch t) -&gt; Result (Term sch ('DSimple t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (FieldValue sch t)
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154547"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span id="local-6989586621679154545"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154545"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TNull</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>  </span><span id="local-6989586621679154542"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch 'TNull)
</span><a href="#local-6989586621679154542"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">AVal.Null</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue sch 'TNull -&gt; Result (FieldValue sch 'TNull)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FieldValue sch 'TNull
forall typeName fieldName (sch :: Schema typeName fieldName).
FieldValue sch 'TNull
</span><span class="hs-identifier hs-var">FNull</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">fromAvro</span></span><span> </span><span id="local-6989586621679154540"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154540"><span class="hs-identifier hs-var">v</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (FieldValue sch 'TNull)
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154540"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;null&quot;</span></span></span><span>
</span><span id="line-201"></span><span id="local-6989586621679154538"><span id="local-6989586621679154539"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="annot"><a href="#local-6989586621679154539"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154538"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><a href="#local-6989586621679154539"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>  </span><span id="local-6989586621679154535"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch ('TPrimitive t))
</span><a href="#local-6989586621679154535"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154534"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154534"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; FieldValue sch ('TPrimitive t)
forall typeName fieldName t1 (sch :: Schema typeName fieldName).
t1 -&gt; FieldValue sch ('TPrimitive t1)
</span><span class="hs-identifier hs-var">FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">(t -&gt; FieldValue sch ('TPrimitive t))
-&gt; Result t -&gt; Result (FieldValue sch ('TPrimitive t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result t
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154534"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-203"></span><span id="local-6989586621679154531"><span id="local-6989586621679154532"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154532"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154531"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154531"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154532"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154531"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154531"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154532"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154531"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TSchematic</span></span><span> </span><span class="annot"><a href="#local-6989586621679154532"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621679154528"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch ('TSchematic t))
</span><a href="#local-6989586621679154528"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154527"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154527"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term sch (sch :/: t) -&gt; FieldValue sch ('TSchematic t)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (t1 :: typeName).
Term sch (sch :/: t1) -&gt; FieldValue sch ('TSchematic t1)
</span><span class="hs-identifier hs-var">FSchematic</span></span><span> </span><span class="annot"><span class="annottext">(Term sch (sch :/: t) -&gt; FieldValue sch ('TSchematic t))
-&gt; Result (Term sch (sch :/: t))
-&gt; Result (FieldValue sch ('TSchematic t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (Term sch (sch :/: t))
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154527"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-207"></span><span id="local-6989586621679154524"><span id="local-6989586621679154525"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154525"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154524"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroUnion"><span class="hs-identifier hs-type">FromAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154525"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154524"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154525"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TUnion</span></span><span> </span><span class="annot"><a href="#local-6989586621679154524"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621679154521"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch ('TUnion choices))
</span><a href="#local-6989586621679154521"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Union</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154520"><span class="annot"><span class="annottext">branch :: Schema
</span><a href="#local-6989586621679154520"><span class="hs-identifier hs-var">branch</span></a></span></span><span> </span><span id="local-6989586621679154519"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154519"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) choices -&gt; FieldValue sch ('TUnion choices)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (choices :: [FieldType typeName]).
NS (FieldValue sch) choices -&gt; FieldValue sch ('TUnion choices)
</span><span class="hs-identifier hs-var">FUnion</span></span><span> </span><span class="annot"><span class="annottext">(NS (FieldValue sch) choices -&gt; FieldValue sch ('TUnion choices))
-&gt; Result (NS (FieldValue sch) choices)
-&gt; Result (FieldValue sch ('TUnion choices))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) choices)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (choices :: [FieldType typeName]).
FromAvroUnion sch choices =&gt;
Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) choices)
</span><a href="Mu.Adapter.Avro.html#fromAvroU"><span class="hs-identifier hs-var">fromAvroU</span></a></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154520"><span class="hs-identifier hs-var">branch</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154519"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">fromAvro</span></span><span> </span><span id="local-6989586621679154516"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154516"><span class="hs-identifier hs-var">v</span></a></span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (FieldValue sch ('TUnion choices))
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154516"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;union&quot;</span></span></span></span><span>
</span><span id="line-211"></span><span id="local-6989586621679154514"><span id="local-6989586621679154515"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154515"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154514"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154515"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154514"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154515"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TOption</span></span><span> </span><span class="annot"><a href="#local-6989586621679154514"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679154511"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch ('TOption t))
</span><a href="#local-6989586621679154511"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154510"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154510"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldValue sch t) -&gt; FieldValue sch ('TOption t)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (t1 :: FieldType typeName).
Maybe (FieldValue sch t1) -&gt; FieldValue sch ('TOption t1)
</span><span class="hs-identifier hs-var">FOption</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldValue sch t) -&gt; FieldValue sch ('TOption t))
-&gt; Result (Maybe (FieldValue sch t))
-&gt; Result (FieldValue sch ('TOption t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (Maybe (FieldValue sch t))
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154510"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-214"></span><span id="local-6989586621679154507"><span id="local-6989586621679154508"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154508"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154507"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154508"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154507"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154508"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TList</span></span><span> </span><span class="annot"><a href="#local-6989586621679154507"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621679154504"><span class="annot"><span class="annottext">fromAvro :: Value Schema -&gt; Result (FieldValue sch ('TList t))
</span><a href="#local-6989586621679154504"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154503"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154503"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldValue sch t] -&gt; FieldValue sch ('TList t)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (t1 :: FieldType typeName).
[FieldValue sch t1] -&gt; FieldValue sch ('TList t1)
</span><span class="hs-identifier hs-var">FList</span></span><span> </span><span class="annot"><span class="annottext">([FieldValue sch t] -&gt; FieldValue sch ('TList t))
-&gt; Result [FieldValue sch t] -&gt; Result (FieldValue sch ('TList t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result [FieldValue sch t]
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154503"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- These are the only two versions of Map supported by the library</span><span>
</span><span id="line-218"></span><span id="local-6989586621679154500"><span id="local-6989586621679154501"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154501"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154500"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154501"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154500"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154501"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154500"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621679154497"><span class="annot"><span class="annottext">fromAvro :: Value Schema
-&gt; Result (FieldValue sch ('TMap ('TPrimitive Text) v))
</span><a href="#local-6989586621679154497"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154496"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154496"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (FieldValue sch ('TPrimitive Text)) (FieldValue sch v)
-&gt; FieldValue sch ('TMap ('TPrimitive Text) v)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (k :: FieldType typeName) (v :: FieldType typeName).
Ord (FieldValue sch k) =&gt;
Map (FieldValue sch k) (FieldValue sch v)
-&gt; FieldValue sch ('TMap k v)
</span><span class="hs-identifier hs-var">FMap</span></span><span> </span><span class="annot"><span class="annottext">(Map (FieldValue sch ('TPrimitive Text)) (FieldValue sch v)
 -&gt; FieldValue sch ('TMap ('TPrimitive Text) v))
-&gt; (Map Text (FieldValue sch v)
    -&gt; Map (FieldValue sch ('TPrimitive Text)) (FieldValue sch v))
-&gt; Map Text (FieldValue sch v)
-&gt; FieldValue sch ('TMap ('TPrimitive Text) v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldValue sch ('TPrimitive Text))
-&gt; Map Text (FieldValue sch v)
-&gt; Map (FieldValue sch ('TPrimitive Text)) (FieldValue sch v)
forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><span class="hs-identifier hs-var">M.mapKeys</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldValue sch ('TPrimitive Text)
forall typeName fieldName t1 (sch :: Schema typeName fieldName).
t1 -&gt; FieldValue sch ('TPrimitive t1)
</span><span class="hs-identifier hs-var">FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">(Map Text (FieldValue sch v)
 -&gt; FieldValue sch ('TMap ('TPrimitive Text) v))
-&gt; Result (Map Text (FieldValue sch v))
-&gt; Result (FieldValue sch ('TMap ('TPrimitive Text) v))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (Map Text (FieldValue sch v))
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154496"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-221"></span><span id="local-6989586621679154492"><span id="local-6989586621679154493"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154493"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154492"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154493"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154492"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154493"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154492"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span id="local-6989586621679154489"><span class="annot"><span class="annottext">fromAvro :: Value Schema
-&gt; Result (FieldValue sch ('TMap ('TPrimitive String) v))
</span><a href="#local-6989586621679154489"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvro</span></a></span></span><span> </span><span id="local-6989586621679154488"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154488"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (FieldValue sch ('TPrimitive String)) (FieldValue sch v)
-&gt; FieldValue sch ('TMap ('TPrimitive String) v)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (k :: FieldType typeName) (v :: FieldType typeName).
Ord (FieldValue sch k) =&gt;
Map (FieldValue sch k) (FieldValue sch v)
-&gt; FieldValue sch ('TMap k v)
</span><span class="hs-identifier hs-var">FMap</span></span><span> </span><span class="annot"><span class="annottext">(Map (FieldValue sch ('TPrimitive String)) (FieldValue sch v)
 -&gt; FieldValue sch ('TMap ('TPrimitive String) v))
-&gt; (Map Text (FieldValue sch v)
    -&gt; Map (FieldValue sch ('TPrimitive String)) (FieldValue sch v))
-&gt; Map Text (FieldValue sch v)
-&gt; FieldValue sch ('TMap ('TPrimitive String) v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldValue sch ('TPrimitive String))
-&gt; Map Text (FieldValue sch v)
-&gt; Map (FieldValue sch ('TPrimitive String)) (FieldValue sch v)
forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><span class="hs-identifier hs-var">M.mapKeys</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FieldValue sch ('TPrimitive String)
forall typeName fieldName t1 (sch :: Schema typeName fieldName).
t1 -&gt; FieldValue sch ('TPrimitive t1)
</span><span class="hs-identifier hs-var">FPrimitive</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FieldValue sch ('TPrimitive String))
-&gt; (Text -&gt; String) -&gt; Text -&gt; FieldValue sch ('TPrimitive String)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map Text (FieldValue sch v)
 -&gt; FieldValue sch ('TMap ('TPrimitive String) v))
-&gt; Result (Map Text (FieldValue sch v))
-&gt; Result (FieldValue sch ('TMap ('TPrimitive String) v))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (Map Text (FieldValue sch v))
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154488"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">class</span><span> </span><span id="FromAvroEnum"><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroEnum"><span class="hs-identifier hs-var">FromAvroEnum</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679154991"><span class="annot"><a href="#local-6989586621679154991"><span class="hs-identifier hs-type">vs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ChoiceDef</span></span><span> </span><span id="local-6989586621679154992"><span class="annot"><a href="#local-6989586621679154992"><span class="hs-identifier hs-type hs-type">fn</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>  </span><span id="fromAvroEnum"><span class="annot"><a href="Mu.Adapter.Avro.html#fromAvroEnum"><span class="hs-identifier hs-type">fromAvroEnum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.Result</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679154991"><span class="hs-identifier hs-type">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroEnum"><span class="hs-identifier hs-type">FromAvroEnum</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621679154484"><span class="annot"><span class="annottext">fromAvroEnum :: Value Schema -&gt; Int -&gt; Result (NS Proxy '[])
</span><a href="#local-6989586621679154484"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroEnum</span></a></span></span><span> </span><span id="local-6989586621679154483"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154483"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (NS Proxy '[])
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154483"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;element not found&quot;</span></span><span>
</span><span id="line-229"></span><span id="local-6989586621679154481"><span id="local-6989586621679154482"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroEnum"><span class="hs-identifier hs-type">FromAvroEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154482"><span class="hs-identifier hs-type">vs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroEnum"><span class="hs-identifier hs-type">FromAvroEnum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154481"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154482"><span class="hs-identifier hs-type">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621679154479"><span class="annot"><span class="annottext">fromAvroEnum :: Value Schema -&gt; Int -&gt; Result (NS Proxy (v : vs))
</span><a href="#local-6989586621679154479"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroEnum</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS Proxy (v : vs) -&gt; Result (NS Proxy (v : vs))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy v -&gt; NS Proxy (v : vs)
forall k (a :: k -&gt; *) (x :: k) (xs :: [k]). a x -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="annot"><span class="annottext">Proxy v
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><a href="Mu.Adapter.Avro.html#fromAvroEnum"><span class="hs-identifier hs-var">fromAvroEnum</span></a></span><span> </span><span id="local-6989586621679154477"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154477"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679154476"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679154476"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS Proxy vs -&gt; NS Proxy (v : vs)
forall k (a :: k -&gt; *) (xs :: [k]) (x :: k).
NS a xs -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">S</span></span><span> </span><span class="annot"><span class="annottext">(NS Proxy vs -&gt; NS Proxy (v : vs))
-&gt; Result (NS Proxy vs) -&gt; Result (NS Proxy (v : vs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Int -&gt; Result (NS Proxy vs)
forall fn (vs :: [ChoiceDef fn]).
FromAvroEnum vs =&gt;
Value Schema -&gt; Int -&gt; Result (NS Proxy vs)
</span><a href="Mu.Adapter.Avro.html#fromAvroEnum"><span class="hs-identifier hs-var">fromAvroEnum</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154477"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679154476"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">class</span><span> </span><span id="FromAvroUnion"><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroUnion"><span class="hs-identifier hs-var">FromAvroUnion</span></a></span></span><span> </span><span id="local-6989586621679154959"><span class="annot"><a href="#local-6989586621679154959"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span id="local-6989586621679154958"><span class="annot"><a href="#local-6989586621679154958"><span class="hs-identifier hs-type">choices</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>  </span><span id="fromAvroU"><span class="annot"><a href="Mu.Adapter.Avro.html#fromAvroU"><span class="hs-identifier hs-type">fromAvroU</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span>
</span><span id="line-235"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Result</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154959"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154958"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span id="local-6989586621679154474"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroUnion"><span class="hs-identifier hs-type">FromAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154474"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>  </span><span id="local-6989586621679154471"><span class="annot"><span class="annottext">fromAvroU :: Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) '[])
</span><a href="#local-6989586621679154471"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroU</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679154470"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154470"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; String -&gt; Result (NS (FieldValue sch) '[])
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154470"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;union choice not found&quot;</span></span></span><span>
</span><span id="line-238"></span><span id="local-6989586621679154467"><span id="local-6989586621679154468"><span id="local-6989586621679154469"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154469"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154468"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroUnion"><span class="hs-identifier hs-type">FromAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154469"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154467"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroUnion"><span class="hs-identifier hs-type">FromAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154469"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154468"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154467"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>  </span><span id="local-6989586621679154465"><span class="annot"><span class="annottext">fromAvroU :: Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) (u : us))
</span><a href="#local-6989586621679154465"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroU</span></a></span></span><span> </span><span id="local-6989586621679154464"><span class="annot"><span class="annottext">branch :: Schema
</span><a href="#local-6989586621679154464"><span class="hs-identifier hs-var">branch</span></a></span></span><span> </span><span id="local-6989586621679154463"><span class="annot"><span class="annottext">v :: Value Schema
</span><a href="#local-6989586621679154463"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Schema -&gt; Bool
</span><span class="hs-identifier hs-var">ASch.matches</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154464"><span class="hs-identifier hs-var">branch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tagged (FieldValue sch u) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasAvroSchema (FieldValue sch u) =&gt;
Tagged (FieldValue sch u) Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154469"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154468"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue sch u -&gt; NS (FieldValue sch) (u : us)
forall k (a :: k -&gt; *) (x :: k) (xs :: [k]). a x -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch u -&gt; NS (FieldValue sch) (u : us))
-&gt; Result (FieldValue sch u)
-&gt; Result (NS (FieldValue sch) (u : us))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (FieldValue sch u)
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154463"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">|</span><span>&#160;</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) us -&gt; NS (FieldValue sch) (u : us)
forall k (a :: k -&gt; *) (xs :: [k]) (x :: k).
NS a xs -&gt; NS a (x : xs)
</span><span class="hs-identifier hs-var">S</span></span><span> </span><span class="annot"><span class="annottext">(NS (FieldValue sch) us -&gt; NS (FieldValue sch) (u : us))
-&gt; Result (NS (FieldValue sch) us)
-&gt; Result (NS (FieldValue sch) (u : us))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) us)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (choices :: [FieldType typeName]).
FromAvroUnion sch choices =&gt;
Schema -&gt; Value Schema -&gt; Result (NS (FieldValue sch) choices)
</span><a href="Mu.Adapter.Avro.html#fromAvroU"><span class="hs-identifier hs-var">fromAvroU</span></a></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154464"><span class="hs-identifier hs-var">branch</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154463"><span class="hs-identifier hs-var">v</span></a></span></span></span></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-keyword">class</span><span> </span><span id="FromAvroFields"><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroFields"><span class="hs-identifier hs-var">FromAvroFields</span></a></span></span><span> </span><span id="local-6989586621679155005"><span class="annot"><a href="#local-6989586621679155005"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679155004"><span class="annot"><a href="#local-6989586621679155004"><span class="hs-identifier hs-type">fs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="fromAvroF"><span class="annot"><a href="Mu.Adapter.Avro.html#fromAvroF"><span class="hs-identifier hs-type">fromAvroF</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HM.HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.Result</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679155005"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679155004"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span id="local-6989586621679154461"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroFields"><span class="hs-identifier hs-type">FromAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154461"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621679154458"><span class="annot"><span class="annottext">fromAvroF :: HashMap Text (Value Schema) -&gt; Result (NP (Field sch) '[])
</span><a href="#local-6989586621679154458"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroF</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP (Field sch) '[] -&gt; Result (NP (Field sch) '[])
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">NP (Field sch) '[]
forall k (a :: k -&gt; *). NP a '[]
</span><span class="hs-identifier hs-var">Nil</span></span></span><span>
</span><span id="line-251"></span><span id="local-6989586621679154453"><span id="local-6989586621679154454"><span id="local-6989586621679154455"><span id="local-6989586621679154456"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154456"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.FromAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154455"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154454"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroFields"><span class="hs-identifier hs-type">FromAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154455"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154453"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#FromAvroFields"><span class="hs-identifier hs-type">FromAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154455"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span class="annot"><a href="#local-6989586621679154456"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154454"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154453"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621679154451"><span class="annot"><span class="annottext">fromAvroF :: HashMap Text (Value Schema)
-&gt; Result (NP (Field sch) ('FieldDef name t : fs))
</span><a href="#local-6989586621679154451"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromAvroF</span></a></span></span><span> </span><span id="local-6989586621679154450"><span class="annot"><span class="annottext">v :: HashMap Text (Value Schema)
</span><a href="#local-6989586621679154450"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashMap Text (Value Schema) -&gt; Maybe (Value Schema)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">HM.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154448"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
</span><a href="#local-6989586621679154450"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-254"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
-&gt; String -&gt; Result (NP (Field sch) ('FieldDef name t : fs))
forall t a. Show t =&gt; t -&gt; String -&gt; Result a
</span><span class="hs-identifier hs-var">A.badValue</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
</span><a href="#local-6989586621679154450"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;field not found&quot;</span></span><span>
</span><span id="line-255"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679154447"><span class="annot"><span class="annottext">f :: Value Schema
</span><a href="#local-6989586621679154447"><span class="hs-identifier hs-var">f</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Field sch ('FieldDef name t)
-&gt; NP (Field sch) fs -&gt; NP (Field sch) ('FieldDef name t : fs)
forall k (a :: k -&gt; *) (x :: k) (xs :: [k]).
a x -&gt; NP a xs -&gt; NP a (x : xs)
</span><span class="hs-operator hs-var">(:*)</span></span><span> </span><span class="annot"><span class="annottext">(Field sch ('FieldDef name t)
 -&gt; NP (Field sch) fs -&gt; NP (Field sch) ('FieldDef name t : fs))
-&gt; Result (Field sch ('FieldDef name t))
-&gt; Result
     (NP (Field sch) fs -&gt; NP (Field sch) ('FieldDef name t : fs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldValue sch t -&gt; Field sch ('FieldDef name t)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (t :: FieldType typeName) (name :: fieldName).
FieldValue sch t -&gt; Field sch ('FieldDef name t)
</span><span class="hs-identifier hs-var">Field</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch t -&gt; Field sch ('FieldDef name t))
-&gt; Result (FieldValue sch t)
-&gt; Result (Field sch ('FieldDef name t))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Value Schema -&gt; Result (FieldValue sch t)
forall a. FromAvro a =&gt; Value Schema -&gt; Result a
</span><span class="hs-identifier hs-var">A.fromAvro</span></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154447"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Result
  (NP (Field sch) fs -&gt; NP (Field sch) ('FieldDef name t : fs))
-&gt; Result (NP (Field sch) fs)
-&gt; Result (NP (Field sch) ('FieldDef name t : fs))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema) -&gt; Result (NP (Field sch) fs)
forall (sch :: Schema Symbol Symbol)
       (fs :: [FieldDef Symbol Symbol]).
FromAvroFields sch fs =&gt;
HashMap Text (Value Schema) -&gt; Result (NP (Field sch) fs)
</span><a href="Mu.Adapter.Avro.html#fromAvroF"><span class="hs-identifier hs-var">fromAvroF</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
</span><a href="#local-6989586621679154450"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154448"><span class="annot"><span class="annottext">fieldName :: Text
</span><a href="#local-6989586621679154448"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154456"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-comment">-- ToAvro instances</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span id="local-6989586621679154442"><span id="local-6989586621679154443"><span id="local-6989586621679154444"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154444"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaFields"><span class="hs-identifier hs-type">HasAvroSchemaFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154443"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154442"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroFields"><span class="hs-identifier hs-type">ToAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154443"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154442"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154443"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DRecord</span></span><span> </span><span class="annot"><a href="#local-6989586621679154444"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154442"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621679154439"><span class="annot"><span class="annottext">toAvro :: Term sch ('DRecord name args) -&gt; Value Schema
</span><a href="#local-6989586621679154439"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TRecord</span></span><span> </span><span id="local-6989586621679154438"><span class="annot"><span class="annottext">fields :: NP (Field sch) args
</span><a href="#local-6989586621679154438"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; HashMap Text (Value Schema) -&gt; Value Schema
forall f. f -&gt; HashMap Text (Value f) -&gt; Value f
</span><span class="hs-identifier hs-var">AVal.Record</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154437"><span class="hs-identifier hs-var">wholeSchema</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP (Field sch) args -&gt; HashMap Text (Value Schema)
forall (sch :: Schema Symbol Symbol)
       (fs :: [FieldDef Symbol Symbol]).
ToAvroFields sch fs =&gt;
NP (Field sch) fs -&gt; HashMap Text (Value Schema)
</span><a href="Mu.Adapter.Avro.html#toAvroF"><span class="hs-identifier hs-var">toAvroF</span></a></span><span> </span><span class="annot"><span class="annottext">NP (Field sch) args
</span><a href="#local-6989586621679154438"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154437"><span class="annot"><span class="annottext">wholeSchema :: Schema
</span><a href="#local-6989586621679154437"><span class="hs-identifier hs-var hs-var">wholeSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (Term sch ('DRecord name args)) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasAvroSchema (Term sch ('DRecord name args)) =&gt;
Tagged (Term sch ('DRecord name args)) Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154443"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DRecord</span></span><span> </span><span class="annot"><a href="#local-6989586621679154444"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154442"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-264"></span><span id="local-6989586621679154433"><span id="local-6989586621679154434"><span id="local-6989586621679154435"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154435"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaEnum"><span class="hs-identifier hs-type">HasAvroSchemaEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154434"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroEnum"><span class="hs-identifier hs-type">ToAvroEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154434"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154433"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DEnum</span></span><span> </span><span class="annot"><a href="#local-6989586621679154435"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154434"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>  </span><span id="local-6989586621679154430"><span class="annot"><span class="annottext">toAvro :: Term sch ('DEnum name choices) -&gt; Value Schema
</span><a href="#local-6989586621679154430"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TEnum</span></span><span> </span><span id="local-6989586621679154429"><span class="annot"><span class="annottext">n :: NS Proxy choices
</span><a href="#local-6989586621679154429"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Schema -&gt; Int -&gt; Text -&gt; Value Schema
forall f. f -&gt; Int -&gt; Text -&gt; Value f
</span><span class="hs-identifier hs-var">AVal.Enum</span></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154428"><span class="hs-identifier hs-var">wholeSchema</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679154427"><span class="hs-identifier hs-var">choice</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154426"><span class="hs-identifier hs-var">text</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154428"><span class="annot"><span class="annottext">wholeSchema :: Schema
</span><a href="#local-6989586621679154428"><span class="hs-identifier hs-var hs-var">wholeSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tagged (Term sch ('DEnum name choices)) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasAvroSchema (Term sch ('DEnum name choices)) =&gt;
Tagged (Term sch ('DEnum name choices)) Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154433"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DEnum</span></span><span> </span><span class="annot"><a href="#local-6989586621679154435"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154434"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679154427"><span class="annot"><span class="annottext">choice :: Int
</span><a href="#local-6989586621679154427"><span class="hs-identifier hs-var">choice</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679154426"><span class="annot"><span class="annottext">text :: Text
</span><a href="#local-6989586621679154426"><span class="hs-identifier hs-var">text</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS Proxy choices -&gt; (Int, Text)
forall k (choices :: [k]).
ToAvroEnum choices =&gt;
NS Proxy choices -&gt; (Int, Text)
</span><a href="Mu.Adapter.Avro.html#toAvroE"><span class="hs-identifier hs-var">toAvroE</span></a></span><span> </span><span class="annot"><span class="annottext">NS Proxy choices
</span><a href="#local-6989586621679154429"><span class="hs-identifier hs-var">n</span></a></span></span></span></span><span>
</span><span id="line-269"></span><span id="local-6989586621679154423"><span id="local-6989586621679154424"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154424"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154423"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154424"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154423"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154424"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">DSimple</span></span><span> </span><span class="annot"><a href="#local-6989586621679154423"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621679154420"><span class="annot"><span class="annottext">toAvro :: Term sch ('DSimple t) -&gt; Value Schema
</span><a href="#local-6989586621679154420"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TSimple</span></span><span> </span><span id="local-6989586621679154419"><span class="annot"><span class="annottext">v :: FieldValue sch t1
</span><a href="#local-6989586621679154419"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue sch t1 -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">FieldValue sch t1
</span><a href="#local-6989586621679154419"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span id="local-6989586621679154418"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154418"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TNull</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-274"></span><span>  </span><span id="local-6989586621679154415"><span class="annot"><span class="annottext">toAvro :: FieldValue sch 'TNull -&gt; Value Schema
</span><a href="#local-6989586621679154415"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FNull</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value Schema
forall f. Value f
</span><span class="hs-identifier hs-var">AVal.Null</span></span></span><span>
</span><span id="line-275"></span><span id="local-6989586621679154413"><span id="local-6989586621679154414"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="annot"><a href="#local-6989586621679154414"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154413"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><a href="#local-6989586621679154414"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621679154410"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TPrimitive t) -&gt; Value Schema
</span><a href="#local-6989586621679154410"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FPrimitive</span></span><span> </span><span id="local-6989586621679154409"><span class="annot"><span class="annottext">v :: t1
</span><a href="#local-6989586621679154409"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t1 -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">t1
</span><a href="#local-6989586621679154409"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-277"></span><span id="local-6989586621679154407"><span id="local-6989586621679154408"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154408"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154407"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154407"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154408"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679154407"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154407"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:/:</span></span><span> </span><span class="annot"><a href="#local-6989586621679154408"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154407"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TSchematic</span></span><span> </span><span class="annot"><a href="#local-6989586621679154408"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621679154404"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TSchematic t) -&gt; Value Schema
</span><a href="#local-6989586621679154404"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FSchematic</span></span><span> </span><span id="local-6989586621679154403"><span class="annot"><span class="annottext">v :: Term sch (sch :/: t1)
</span><a href="#local-6989586621679154403"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term sch (sch :/: t) -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">Term sch (sch :/: t)
Term sch (sch :/: t1)
</span><a href="#local-6989586621679154403"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-281"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679154400"><span class="annot"><a href="#local-6989586621679154400"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span id="local-6989586621679154399"><span class="annot"><a href="#local-6989586621679154399"><span class="hs-identifier hs-type">choices</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-282"></span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchemaUnion"><span class="hs-identifier hs-type">HasAvroSchemaUnion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154400"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154399"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroUnion"><span class="hs-identifier hs-type">ToAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154400"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154399"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154400"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TUnion</span></span><span> </span><span class="annot"><a href="#local-6989586621679154399"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-284"></span><span>  </span><span id="local-6989586621679154398"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TUnion choices) -&gt; Value Schema
</span><a href="#local-6989586621679154398"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FUnion</span></span><span> </span><span id="local-6989586621679154397"><span class="annot"><span class="annottext">v :: NS (FieldValue sch) choices
</span><a href="#local-6989586621679154397"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector Schema -&gt; Schema -&gt; Value Schema -&gt; Value Schema
forall f. Vector f -&gt; f -&gt; Value f -&gt; Value f
</span><span class="hs-identifier hs-var">AVal.Union</span></span><span> </span><span class="annot"><span class="annottext">Vector Schema
</span><a href="#local-6989586621679154396"><span class="hs-identifier hs-var">wholeSchema'</span></a></span><span> </span><span class="annot"><span class="annottext">Schema
</span><a href="#local-6989586621679154395"><span class="hs-identifier hs-var">chosenTy</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154394"><span class="hs-identifier hs-var">chosenVal</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154393"><span class="annot"><span class="annottext">wholeSchema :: NonEmpty Schema
</span><a href="#local-6989586621679154393"><span class="hs-identifier hs-var hs-var">wholeSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (FieldValue sch)
-&gt; Proxy choices -&gt; [TypeName] -&gt; NonEmpty Schema
forall k (f :: k -&gt; *) (xs :: [k]).
HasAvroSchemaUnion f xs =&gt;
Proxy f -&gt; Proxy xs -&gt; [TypeName] -&gt; NonEmpty Schema
</span><a href="Mu.Adapter.Avro.html#schemaU"><span class="hs-identifier hs-var">schemaU</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (FieldValue sch)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154400"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy choices
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154399"><span class="hs-identifier hs-type">choices</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-286"></span><span>          </span><span id="local-6989586621679154396"><span class="annot"><span class="annottext">wholeSchema' :: Vector Schema
</span><a href="#local-6989586621679154396"><span class="hs-identifier hs-var hs-var">wholeSchema'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Schema] -&gt; Vector Schema
forall a. [a] -&gt; Vector a
</span><span class="hs-identifier hs-var">V.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Schema -&gt; [Schema]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NonEmptyList.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Schema
</span><a href="#local-6989586621679154393"><span class="hs-identifier hs-var">wholeSchema</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679154395"><span class="annot"><span class="annottext">chosenTy :: Schema
</span><a href="#local-6989586621679154395"><span class="hs-identifier hs-var">chosenTy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679154394"><span class="annot"><span class="annottext">chosenVal :: Value Schema
</span><a href="#local-6989586621679154394"><span class="hs-identifier hs-var">chosenVal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) choices -&gt; (Schema, Value Schema)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (choices :: [FieldType typeName]).
ToAvroUnion sch choices =&gt;
NS (FieldValue sch) choices -&gt; (Schema, Value Schema)
</span><a href="Mu.Adapter.Avro.html#toAvroU"><span class="hs-identifier hs-var">toAvroU</span></a></span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) choices
</span><a href="#local-6989586621679154397"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-288"></span><span id="local-6989586621679154389"><span id="local-6989586621679154390"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154390"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154389"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154390"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154389"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154390"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TOption</span></span><span> </span><span class="annot"><a href="#local-6989586621679154389"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-290"></span><span>  </span><span id="local-6989586621679154386"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TOption t) -&gt; Value Schema
</span><a href="#local-6989586621679154386"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FOption</span></span><span> </span><span id="local-6989586621679154385"><span class="annot"><span class="annottext">v :: Maybe (FieldValue sch t1)
</span><a href="#local-6989586621679154385"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldValue sch t1) -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldValue sch t1)
</span><a href="#local-6989586621679154385"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-291"></span><span id="local-6989586621679154383"><span id="local-6989586621679154384"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154384"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154383"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154384"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154383"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154384"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TList</span></span><span> </span><span class="annot"><a href="#local-6989586621679154383"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621679154380"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TList t) -&gt; Value Schema
</span><a href="#local-6989586621679154380"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FList</span></span><span> </span><span id="local-6989586621679154379"><span class="annot"><span class="annottext">v :: [FieldValue sch t1]
</span><a href="#local-6989586621679154379"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vector (Value Schema) -&gt; Value Schema
forall f. Vector (Value f) -&gt; Value f
</span><span class="hs-identifier hs-var">AVal.Array</span></span><span> </span><span class="annot"><span class="annottext">(Vector (Value Schema) -&gt; Value Schema)
-&gt; Vector (Value Schema) -&gt; Value Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Value Schema] -&gt; Vector (Value Schema)
forall a. [a] -&gt; Vector a
</span><span class="hs-identifier hs-var">V.fromList</span></span><span> </span><span class="annot"><span class="annottext">([Value Schema] -&gt; Vector (Value Schema))
-&gt; [Value Schema] -&gt; Vector (Value Schema)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldValue sch t1 -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch t1 -&gt; Value Schema)
-&gt; [FieldValue sch t1] -&gt; [Value Schema]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[FieldValue sch t1]
</span><a href="#local-6989586621679154379"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-294"></span><span class="hs-comment">-- These are the only two versions of Map supported by the library</span><span>
</span><span id="line-295"></span><span id="local-6989586621679154377"><span id="local-6989586621679154378"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154378"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154377"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154378"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154377"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154378"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154377"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621679154374"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TMap ('TPrimitive Text) v) -&gt; Value Schema
</span><a href="#local-6989586621679154374"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FMap</span></span><span> </span><span id="local-6989586621679154373"><span class="annot"><span class="annottext">v :: Map (FieldValue sch k) (FieldValue sch v)
</span><a href="#local-6989586621679154373"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (FieldValue sch v) -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">(Map Text (FieldValue sch v) -&gt; Value Schema)
-&gt; Map Text (FieldValue sch v) -&gt; Value Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch k -&gt; Text)
-&gt; Map (FieldValue sch k) (FieldValue sch v)
-&gt; Map Text (FieldValue sch v)
forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><span class="hs-identifier hs-var">M.mapKeys</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FPrimitive</span></span><span> </span><span id="local-6989586621679154372"><span class="annot"><span class="annottext">k :: t1
</span><a href="#local-6989586621679154372"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t1
Text
</span><a href="#local-6989586621679154372"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (FieldValue sch k) (FieldValue sch v)
</span><a href="#local-6989586621679154373"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-298"></span><span id="local-6989586621679154370"><span id="local-6989586621679154371"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Mu.Adapter.Avro.html#HasAvroSchema%27"><span class="hs-identifier hs-type">HasAvroSchema'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154371"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154371"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154371"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">TPrimitive</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679154367"><span class="annot"><span class="annottext">toAvro :: FieldValue sch ('TMap ('TPrimitive String) v) -&gt; Value Schema
</span><a href="#local-6989586621679154367"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvro</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FMap</span></span><span> </span><span id="local-6989586621679154366"><span class="annot"><span class="annottext">v :: Map (FieldValue sch k) (FieldValue sch v)
</span><a href="#local-6989586621679154366"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String (FieldValue sch v) -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">(Map String (FieldValue sch v) -&gt; Value Schema)
-&gt; Map String (FieldValue sch v) -&gt; Value Schema
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldValue sch k -&gt; String)
-&gt; Map (FieldValue sch k) (FieldValue sch v)
-&gt; Map String (FieldValue sch v)
forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><span class="hs-identifier hs-var">M.mapKeys</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FPrimitive</span></span><span> </span><span id="local-6989586621679154365"><span class="annot"><span class="annottext">k :: t1
</span><a href="#local-6989586621679154365"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t1
String
</span><a href="#local-6989586621679154365"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (FieldValue sch k) (FieldValue sch v)
</span><a href="#local-6989586621679154366"><span class="hs-identifier hs-var">v</span></a></span></span></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-keyword">class</span><span> </span><span id="ToAvroUnion"><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroUnion"><span class="hs-identifier hs-var">ToAvroUnion</span></a></span></span><span> </span><span id="local-6989586621679154852"><span class="annot"><a href="#local-6989586621679154852"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span id="local-6989586621679154851"><span class="annot"><a href="#local-6989586621679154851"><span class="hs-identifier hs-type">choices</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-303"></span><span>  </span><span id="toAvroU"><span class="annot"><a href="Mu.Adapter.Avro.html#toAvroU"><span class="hs-identifier hs-type">toAvroU</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154852"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154851"><span class="hs-identifier hs-type">choices</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span id="local-6989586621679154364"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroUnion"><span class="hs-identifier hs-type">ToAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154364"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621679154361"><span class="annot"><span class="annottext">toAvroU :: NS (FieldValue sch) '[] -&gt; (Schema, Value Schema)
</span><a href="#local-6989586621679154361"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroU</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Schema, Value Schema)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;ToAvro in an empty union&quot;</span></span></span><span>
</span><span id="line-306"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679154358"><span class="annot"><a href="#local-6989586621679154358"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span id="local-6989586621679154357"><span class="annot"><a href="#local-6989586621679154357"><span class="hs-identifier hs-type">u</span></a></span></span><span> </span><span id="local-6989586621679154356"><span class="annot"><a href="#local-6989586621679154356"><span class="hs-identifier hs-type">us</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-307"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154358"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154357"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroUnion"><span class="hs-identifier hs-type">ToAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154358"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154356"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroUnion"><span class="hs-identifier hs-type">ToAvroUnion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154358"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679154357"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154356"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621679154355"><span class="annot"><span class="annottext">toAvroU :: NS (FieldValue sch) (u : us) -&gt; (Schema, Value Schema)
</span><a href="#local-6989586621679154355"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroU</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Z</span></span><span> </span><span id="local-6989586621679154354"><span class="annot"><span class="annottext">v :: FieldValue sch x
</span><a href="#local-6989586621679154354"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tagged (FieldValue sch u) Schema -&gt; Schema
forall k (s :: k) b. Tagged s b -&gt; b
</span><span class="hs-identifier hs-var hs-var">unTagged</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasAvroSchema (FieldValue sch u) =&gt;
Tagged (FieldValue sch u) Schema
forall a. HasAvroSchema a =&gt; Tagged a Schema
</span><span class="hs-identifier hs-var">A.schema</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154358"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154357"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldValue sch x -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">FieldValue sch x
</span><a href="#local-6989586621679154354"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><a href="Mu.Adapter.Avro.html#toAvroU"><span class="hs-identifier hs-var">toAvroU</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span> </span><span id="local-6989586621679154353"><span class="annot"><span class="annottext">n :: NS (FieldValue sch) xs
</span><a href="#local-6989586621679154353"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) xs -&gt; (Schema, Value Schema)
forall typeName fieldName (sch :: Schema typeName fieldName)
       (choices :: [FieldType typeName]).
ToAvroUnion sch choices =&gt;
NS (FieldValue sch) choices -&gt; (Schema, Value Schema)
</span><a href="Mu.Adapter.Avro.html#toAvroU"><span class="hs-identifier hs-var">toAvroU</span></a></span><span> </span><span class="annot"><span class="annottext">NS (FieldValue sch) xs
</span><a href="#local-6989586621679154353"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">class</span><span> </span><span id="ToAvroEnum"><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroEnum"><span class="hs-identifier hs-var">ToAvroEnum</span></a></span></span><span> </span><span id="local-6989586621679154880"><span class="annot"><a href="#local-6989586621679154880"><span class="hs-identifier hs-type">choices</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="toAvroE"><span class="annot"><a href="Mu.Adapter.Avro.html#toAvroE"><span class="hs-identifier hs-type">toAvroE</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NS</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679154880"><span class="hs-identifier hs-type">choices</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroEnum"><span class="hs-identifier hs-type">ToAvroEnum</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679154350"><span class="annot"><span class="annottext">toAvroE :: NS Proxy '[] -&gt; (Int, Text)
</span><a href="#local-6989586621679154350"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; NS Proxy '[] -&gt; (Int, Text)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="hs-string">&quot;ToAvro in an empty enum&quot;</span></span><span>
</span><span id="line-316"></span><span id="local-6989586621679154348"><span id="local-6989586621679154349"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154349"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroEnum"><span class="hs-identifier hs-type">ToAvroEnum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154348"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroEnum"><span class="hs-identifier hs-type">ToAvroEnum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">ChoiceDef</span></span><span> </span><span class="annot"><a href="#local-6989586621679154349"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154348"><span class="hs-identifier hs-type">us</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>  </span><span id="local-6989586621679154346"><span class="annot"><span class="annottext">toAvroE :: NS Proxy ('ChoiceDef u : us) -&gt; (Int, Text)
</span><a href="#local-6989586621679154346"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Z</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proxy u -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy u
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154349"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="Mu.Adapter.Avro.html#toAvroE"><span class="hs-identifier hs-var">toAvroE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span> </span><span id="local-6989586621679154345"><span class="annot"><span class="annottext">v :: NS Proxy xs
</span><a href="#local-6989586621679154345"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679154344"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679154344"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679154343"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621679154343"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NS Proxy xs -&gt; (Int, Text)
forall k (choices :: [k]).
ToAvroEnum choices =&gt;
NS Proxy choices -&gt; (Int, Text)
</span><a href="Mu.Adapter.Avro.html#toAvroE"><span class="hs-identifier hs-var">toAvroE</span></a></span><span> </span><span class="annot"><span class="annottext">NS Proxy xs
</span><a href="#local-6989586621679154345"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679154344"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154343"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">class</span><span> </span><span id="ToAvroFields"><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroFields"><span class="hs-identifier hs-var">ToAvroFields</span></a></span></span><span> </span><span id="local-6989586621679154890"><span class="annot"><a href="#local-6989586621679154890"><span class="hs-identifier hs-type">sch</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679154889"><span class="annot"><a href="#local-6989586621679154889"><span class="hs-identifier hs-type">fs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-322"></span><span>  </span><span id="toAvroF"><span class="annot"><a href="Mu.Adapter.Avro.html#toAvroF"><span class="hs-identifier hs-type">toAvroF</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Field</span></span><span> </span><span class="annot"><a href="#local-6989586621679154890"><span class="hs-identifier hs-type">sch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679154889"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HM.HashMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AVal.Value</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.Schema</span></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span id="local-6989586621679154341"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroFields"><span class="hs-identifier hs-type">ToAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154341"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span id="local-6989586621679154338"><span class="annot"><span class="annottext">toAvroF :: NP (Field sch) '[] -&gt; HashMap Text (Value Schema)
</span><a href="#local-6989586621679154338"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroF</span></a></span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap Text (Value Schema)
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HM.empty</span></span></span><span>
</span><span id="line-325"></span><span id="local-6989586621679154333"><span id="local-6989586621679154334"><span id="local-6989586621679154335"><span id="local-6989586621679154336"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679154336"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">A.ToAvro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FieldValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679154335"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154334"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroFields"><span class="hs-identifier hs-type">ToAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154335"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154333"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Mu.Adapter.Avro.html#ToAvroFields"><span class="hs-identifier hs-type">ToAvroFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154335"><span class="hs-identifier hs-type">sch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">FieldDef</span></span><span> </span><span class="annot"><a href="#local-6989586621679154336"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679154334"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679154333"><span class="hs-identifier hs-type">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-327"></span><span>  </span><span id="local-6989586621679154331"><span class="annot"><span class="annottext">toAvroF :: NP (Field sch) ('FieldDef name t : fs)
-&gt; HashMap Text (Value Schema)
</span><a href="#local-6989586621679154331"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAvroF</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Field</span></span><span> </span><span id="local-6989586621679154330"><span class="annot"><span class="annottext">v :: FieldValue sch t
</span><a href="#local-6989586621679154330"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:*</span></span><span> </span><span id="local-6989586621679154329"><span class="annot"><span class="annottext">rest :: NP (Field sch) xs
</span><a href="#local-6989586621679154329"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Value Schema
-&gt; HashMap Text (Value Schema)
-&gt; HashMap Text (Value Schema)
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HM.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679154327"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Value Schema
</span><a href="#local-6989586621679154326"><span class="hs-identifier hs-var">fieldValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP (Field sch) xs -&gt; HashMap Text (Value Schema)
forall (sch :: Schema Symbol Symbol)
       (fs :: [FieldDef Symbol Symbol]).
ToAvroFields sch fs =&gt;
NP (Field sch) fs -&gt; HashMap Text (Value Schema)
</span><a href="Mu.Adapter.Avro.html#toAvroF"><span class="hs-identifier hs-var">toAvroF</span></a></span><span> </span><span class="annot"><span class="annottext">NP (Field sch) xs
</span><a href="#local-6989586621679154329"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679154327"><span class="annot"><span class="annottext">fieldName :: Text
</span><a href="#local-6989586621679154327"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy name -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy name
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679154336"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>          </span><span id="local-6989586621679154326"><span class="annot"><span class="annottext">fieldValue :: Value Schema
</span><a href="#local-6989586621679154326"><span class="hs-identifier hs-var hs-var">fieldValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldValue sch t -&gt; Value Schema
forall a. ToAvro a =&gt; a -&gt; Value Schema
</span><span class="hs-identifier hs-var">A.toAvro</span></span><span> </span><span class="annot"><span class="annottext">FieldValue sch t
</span><a href="#local-6989586621679154330"><span class="hs-identifier hs-var">v</span></a></span></span></span></span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">-- Conversion of symbols to other things</span><span>
</span><span id="line-332"></span><span id="local-6989586621679155022"><span id="local-6989586621679155023"><span class="annot"><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-type">nameText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679155023"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679155022"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679155023"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span></span></span><span>
</span><span id="line-333"></span><span id="nameText"><span class="annot"><span class="annottext">nameText :: proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var hs-var">nameText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (proxy s -&gt; String) -&gt; proxy s -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">proxy s -&gt; String
forall k (a :: k) (proxy :: k -&gt; *).
KnownName a =&gt;
proxy a -&gt; String
</span><span class="hs-identifier hs-var">nameVal</span></span><span>
</span><span id="line-334"></span><span id="local-6989586621679155116"><span id="local-6989586621679155117"><span class="annot"><a href="Mu.Adapter.Avro.html#nameTypeName"><span class="hs-identifier hs-type">nameTypeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownName</span></span><span> </span><span class="annot"><a href="#local-6989586621679155117"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679155116"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679155117"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ASch.TypeName</span></span></span></span><span>
</span><span id="line-335"></span><span id="nameTypeName"><span class="annot"><span class="annottext">nameTypeName :: proxy s -&gt; TypeName
</span><a href="Mu.Adapter.Avro.html#nameTypeName"><span class="hs-identifier hs-var hs-var">nameTypeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; TypeName
</span><span class="hs-identifier hs-var">ASch.parseFullname</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; TypeName) -&gt; (proxy s -&gt; Text) -&gt; proxy s -&gt; TypeName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">proxy s -&gt; Text
forall k (s :: k) (proxy :: k -&gt; *). KnownName s =&gt; proxy s -&gt; Text
</span><a href="Mu.Adapter.Avro.html#nameText"><span class="hs-identifier hs-var">nameText</span></a></span><span>
</span><span id="line-336"></span></pre></body></html>