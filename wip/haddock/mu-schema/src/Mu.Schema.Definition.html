<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language DataKinds            #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# language FlexibleInstances    #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# language PolyKinds            #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# language ScopedTypeVariables  #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# language TypeApplications     #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# language TypeFamilies         #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# language TypeOperators        #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# language UndecidableInstances #-}</span><span>
</span><a name="line-9"></a><span class="hs-comment">{-|
Description : Definition of schemas

This module gives a set of combinators
to define schemas in the sense of Avro
or Protocol Buffers.

In order to re-use definitions at both
the type and term levels, the actual
constructors are defined in types ending
with @B@, and are parametrized by the type
used to describe identifiers.
The versions without the suffix set this
parameter to 'Type', and are thought as the
API to be used in the type-level.
If you use 'reflectSchema' to obtain a term-
level representation, the parameter is set
to 'TypeRep'.
-}</span><span>
</span><a name="line-28"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Mu.Schema.Definition</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-29"></a><span class="hs-comment">-- * Definition of schemas</span><span>
</span><a name="line-30"></a><span>  </span><a href="Mu.Schema.Definition.html#Schema%27"><span class="hs-identifier hs-type">Schema'</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-type">SchemaB</span></a><span>
</span><a name="line-31"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier hs-type">TypeDef</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-type">TypeDefB</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-32"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-34"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-35"></a><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-type">:/:</span></a><span class="hs-special">)</span><span>
</span><a name="line-36"></a><span class="hs-comment">-- * One-to-one mappings</span><span>
</span><a name="line-37"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier hs-type">Mapping</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-type">Mappings</span></a><span>
</span><a name="line-38"></a><span class="hs-comment">-- ** Finding correspondences</span><span>
</span><a name="line-39"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-type">MappingRight</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-type">MappingLeft</span></a><span>
</span><a name="line-40"></a><span class="hs-comment">-- * Reflection to term-level</span><span>
</span><a name="line-41"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a><span>
</span><a name="line-42"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-var">reflectFields</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-var">reflectChoices</span></a><span>
</span><a name="line-43"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-var">reflectFieldTypes</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span>
</span><a name="line-44"></a><span class="hs-comment">-- * Supporting type classes</span><span>
</span><a name="line-45"></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-46"></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Kind</span><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Proxy</span><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">Data.Typeable</span><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">GHC.TypeLits</span><span>
</span><a name="line-52"></a><span>
</span><a name="line-53"></a><span class="hs-comment">-- | A set of type definitions,</span><span>
</span><a name="line-54"></a><span class="hs-comment">--   where the names of types and fields are</span><span>
</span><a name="line-55"></a><span class="hs-comment">--   defined by type-level strings ('Symbol's).</span><span>
</span><a name="line-56"></a><span class="hs-keyword">type</span><span> </span><a name="Schema%27"><a href="Mu.Schema.Definition.html#Schema%27"><span class="hs-identifier">Schema'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a><span> </span><span class="hs-identifier hs-type">Symbol</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span class="hs-comment">-- |&#160;Type names and field names can be of any</span><span>
</span><a name="line-59"></a><span class="hs-comment">--   kind, but for many uses we need a way</span><span>
</span><a name="line-60"></a><span class="hs-comment">--   to turn them into strings at run-time.</span><span>
</span><a name="line-61"></a><span class="hs-comment">--   This class generalizes 'KnownSymbol'.</span><span>
</span><a name="line-62"></a><span class="hs-keyword">class</span><span> </span><a name="KnownName"><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier">KnownName</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679025451"><a href="#local-6989586621679025451"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679025450"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-63"></a><span>  </span><a name="nameVal"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679025452"><span class="hs-identifier hs-type">proxy</span></a><span> </span><a href="#local-6989586621679025451"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-64"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">KnownSymbol</span><span> </span><a href="#local-6989586621679026918"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679026918"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-65"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">symbolVal</span><span>
</span><a name="line-66"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">True</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-67"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;True&quot;</span><span>
</span><a name="line-68"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">False</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-69"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;False&quot;</span><span>
</span><a name="line-70"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">KnownNat</span><span> </span><a href="#local-6989586621679025932"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679025932"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Nat</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-71"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">natVal</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-comment">-- | A set of type definitions.</span><span>
</span><a name="line-74"></a><span class="hs-comment">--   In general, we can use any kind we want for</span><span>
</span><a name="line-75"></a><span class="hs-comment">--   both type and field names, although in practice</span><span>
</span><a name="line-76"></a><span class="hs-comment">--   you always want to use 'Symbol'.</span><span>
</span><a name="line-77"></a><span class="hs-keyword">type</span><span> </span><a name="Schema"><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier">Schema</span></a></a><span> </span><a name="local-6989586621679025448"><a href="#local-6989586621679025448"><span class="hs-identifier">typeName</span></a></a><span> </span><a name="local-6989586621679025449"><a href="#local-6989586621679025449"><span class="hs-identifier">fieldName</span></a></a><span>
</span><a name="line-78"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-type">SchemaB</span></a><span> </span><span class="hs-identifier hs-type">Type</span><span> </span><a href="#local-6989586621679025448"><span class="hs-identifier hs-type">typeName</span></a><span> </span><a href="#local-6989586621679025449"><span class="hs-identifier hs-type">fieldName</span></a><span>
</span><a name="line-79"></a><span class="hs-comment">-- | A set of type definitions,</span><span>
</span><a name="line-80"></a><span class="hs-comment">--   parametric on type representations.</span><span>
</span><a name="line-81"></a><span class="hs-keyword">type</span><span> </span><a name="SchemaB"><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier">SchemaB</span></a></a><span> </span><a name="local-6989586621679025445"><a href="#local-6989586621679025445"><span class="hs-identifier">builtin</span></a></a><span> </span><a name="local-6989586621679025446"><a href="#local-6989586621679025446"><span class="hs-identifier">typeName</span></a></a><span> </span><a name="local-6989586621679025447"><a href="#local-6989586621679025447"><span class="hs-identifier">fieldName</span></a></a><span>
</span><a name="line-82"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-type">TypeDefB</span></a><span> </span><a href="#local-6989586621679025445"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025446"><span class="hs-identifier hs-type">typeName</span></a><span> </span><a href="#local-6989586621679025447"><span class="hs-identifier hs-type">fieldName</span></a><span class="hs-special">]</span><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span class="hs-comment">-- | Defines a type in a schema.</span><span>
</span><a name="line-85"></a><span class="hs-comment">--   Each type can be:</span><span>
</span><a name="line-86"></a><span class="hs-comment">--   * a record: a list of key-value pairs,</span><span>
</span><a name="line-87"></a><span class="hs-comment">--   * an enumeration: an element of a list of choices,</span><span>
</span><a name="line-88"></a><span class="hs-comment">--   * a reference to a primitive type.</span><span>
</span><a name="line-89"></a><span class="hs-keyword">type</span><span> </span><a name="TypeDef"><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier">TypeDef</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier hs-type">TypeDefB</span></a><span> </span><span class="hs-identifier hs-type">Type</span><span>
</span><a name="line-90"></a><span class="hs-comment">-- | Defines a type in a schema,</span><span>
</span><a name="line-91"></a><span class="hs-comment">--   parametric on type representations.</span><span>
</span><a name="line-92"></a><span class="hs-keyword">data</span><span> </span><a name="TypeDefB"><a href="Mu.Schema.Definition.html#TypeDefB"><span class="hs-identifier">TypeDefB</span></a></a><span> </span><a name="local-6989586621679025442"><a href="#local-6989586621679025442"><span class="hs-identifier">builtin</span></a></a><span> </span><a name="local-6989586621679025443"><a href="#local-6989586621679025443"><span class="hs-identifier">typeName</span></a></a><span> </span><a name="local-6989586621679025444"><a href="#local-6989586621679025444"><span class="hs-identifier">fieldName</span></a></a><span>
</span><a name="line-93"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | A list of key-value pairs.</span><span>
</span><a name="line-94"></a><span>    </span><a name="DRecord"><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier">DRecord</span></a></a><span> </span><a href="#local-6989586621679025443"><span class="hs-identifier hs-type">typeName</span></a><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a><span> </span><a href="#local-6989586621679025442"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025443"><span class="hs-identifier hs-type">typeName</span></a><span> </span><a href="#local-6989586621679025444"><span class="hs-identifier hs-type">fieldName</span></a><span class="hs-special">]</span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-comment">-- | An element of a list of choices.</span><span>
</span><a name="line-96"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DEnum"><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier">DEnum</span></a></a><span>   </span><a href="#local-6989586621679025443"><span class="hs-identifier hs-type">typeName</span></a><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a><span> </span><a href="#local-6989586621679025444"><span class="hs-identifier hs-type">fieldName</span></a><span class="hs-special">]</span><span>
</span><a name="line-97"></a><span>    </span><span class="hs-comment">-- | A reference to a primitive type.</span><span>
</span><a name="line-98"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DSimple"><a href="Mu.Schema.Definition.html#DSimple"><span class="hs-identifier">DSimple</span></a></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025442"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025443"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span>
</span><a name="line-99"></a><span>
</span><a name="line-100"></a><span class="hs-comment">-- | Defines each of the choices in an enumeration.</span><span>
</span><a name="line-101"></a><span class="hs-keyword">newtype</span><span> </span><a name="ChoiceDef"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier">ChoiceDef</span></a></a><span> </span><a name="local-6989586621679025441"><a href="#local-6989586621679025441"><span class="hs-identifier">fieldName</span></a></a><span>
</span><a name="line-102"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | One single choice from an enumeration.</span><span>
</span><a name="line-103"></a><span>    </span><a name="ChoiceDef"><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier">ChoiceDef</span></a></a><span> </span><a href="#local-6989586621679025441"><span class="hs-identifier hs-type">fieldName</span></a><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-comment">-- | Defines a field in a record</span><span>
</span><a name="line-106"></a><span class="hs-comment">--   by a name and the corresponding type.</span><span>
</span><a name="line-107"></a><span class="hs-keyword">type</span><span> </span><a name="FieldDef"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier">FieldDef</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a><span> </span><span class="hs-identifier hs-type">Type</span><span>
</span><a name="line-108"></a><span class="hs-comment">-- | Defines a field in a record,</span><span>
</span><a name="line-109"></a><span class="hs-comment">--   parametric on type representations.</span><span>
</span><a name="line-110"></a><span class="hs-keyword">data</span><span> </span><a name="FieldDefB"><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier">FieldDefB</span></a></a><span> </span><a name="local-6989586621679025438"><a href="#local-6989586621679025438"><span class="hs-identifier">builtin</span></a></a><span> </span><a name="local-6989586621679025439"><a href="#local-6989586621679025439"><span class="hs-identifier">typeName</span></a></a><span> </span><a name="local-6989586621679025440"><a href="#local-6989586621679025440"><span class="hs-identifier">fieldName</span></a></a><span>
</span><a name="line-111"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | One single field in a record.</span><span>
</span><a name="line-112"></a><span>    </span><a name="FieldDef"><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier">FieldDef</span></a></a><span> </span><a href="#local-6989586621679025440"><span class="hs-identifier hs-type">fieldName</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025438"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025439"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-comment">-- | Types of fields of a record.</span><span>
</span><a name="line-115"></a><span class="hs-comment">--   References to other types in the same schema</span><span>
</span><a name="line-116"></a><span class="hs-comment">--   are done via the 'TSchematic' constructor.</span><span>
</span><a name="line-117"></a><span class="hs-keyword">type</span><span> </span><a name="FieldType"><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier">FieldType</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><span class="hs-identifier hs-type">Type</span><span>
</span><a name="line-118"></a><span class="hs-comment">-- | Types of fields of a record,</span><span>
</span><a name="line-119"></a><span class="hs-comment">--   parametric on type representations.</span><span>
</span><a name="line-120"></a><span class="hs-keyword">data</span><span> </span><a name="FieldTypeB"><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier">FieldTypeB</span></a></a><span> </span><a name="local-6989586621679025436"><a href="#local-6989586621679025436"><span class="hs-identifier">builtin</span></a></a><span> </span><a name="local-6989586621679025437"><a href="#local-6989586621679025437"><span class="hs-identifier">typeName</span></a></a><span>
</span><a name="line-121"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Null, as found in Avro.</span><span>
</span><a name="line-122"></a><span>    </span><a name="TNull"><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier">TNull</span></a></a><span>
</span><a name="line-123"></a><span>    </span><span class="hs-comment">-- | Reference to a primitive type, such as integers or Booleans.</span><span>
</span><a name="line-124"></a><span>    </span><span class="hs-comment">--   The set of supported primitive types depends on the protocol.</span><span>
</span><a name="line-125"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TPrimitive"><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier">TPrimitive</span></a></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span>
</span><a name="line-126"></a><span>    </span><span class="hs-comment">-- | Reference to another type in the schema.</span><span>
</span><a name="line-127"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TSchematic"><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier">TSchematic</span></a></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span>
</span><a name="line-128"></a><span>    </span><span class="hs-comment">-- |&#160;Optional value.</span><span>
</span><a name="line-129"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TOption"><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier">TOption</span></a></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>    </span><span class="hs-comment">-- |&#160;List of values.</span><span>
</span><a name="line-131"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TList"><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier">TList</span></a></a><span>   </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span>
</span><a name="line-132"></a><span>    </span><span class="hs-comment">-- | Map of values.</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-comment">--   The set of supported key types depends on the protocol.</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TMap"><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier">TMap</span></a></a><span>    </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span>    </span><span class="hs-comment">-- | Represents a choice between types.</span><span>
</span><a name="line-136"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="TUnion"><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier">TUnion</span></a></a><span>  </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><a href="#local-6989586621679025436"><span class="hs-identifier hs-type">builtin</span></a><span> </span><a href="#local-6989586621679025437"><span class="hs-identifier hs-type">typeName</span></a><span class="hs-special">]</span><span>
</span><a name="line-137"></a><span>
</span><a name="line-138"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025930"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a><span> </span><a href="#local-6989586621679025930"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679025931"><span class="hs-identifier hs-type">fields</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-139"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025930"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-140"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025928"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a><span> </span><a href="#local-6989586621679025928"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679025929"><span class="hs-identifier hs-type">choices</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-141"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025928"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-142"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025927"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a><span> </span><a href="#local-6989586621679025927"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-143"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025927"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-144"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025925"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a><span> </span><a href="#local-6989586621679025925"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679025926"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-145"></a><span>  </span><a name="local-8214565720323798448"><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier">nameVal</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025925"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-146"></a><span>
</span><a name="line-147"></a><span class="hs-comment">-- | Lookup a type in a schema by its name.</span><span>
</span><a name="line-148"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679025424"><a href="#local-6989586621679025424"><span class="hs-identifier">sch</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a><span> </span><a href="#local-6989586621679025422"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679025423"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><a name="%3A%2F%3A"><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator">:/:</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679025425"><a href="#local-6989586621679025425"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679025422"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#TypeDef"><span class="hs-identifier hs-type">TypeDef</span></a><span> </span><a href="#local-6989586621679025422"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679025423"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-149"></a><span>  </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-operator">:/:</span><span> </span><a href="#local-6989586621679025426"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">TypeError</span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-string">&quot;Cannot find type &quot;</span><span> </span><span class="hs-special">'</span><span class="hs-operator hs-type">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">ShowType</span><span> </span><a href="#local-6989586621679025426"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-special">'</span><span class="hs-operator">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-string">&quot; in the schema&quot;</span><span class="hs-special">)</span><span>
</span><a name="line-150"></a><span>  </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">DRecord</span><span> </span><a href="#local-6989586621679025427"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025428"><span class="hs-identifier hs-type">fields</span></a><span>  </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025429"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:/:</span><span> </span><a href="#local-6989586621679025427"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-type">DRecord</span></a><span> </span><a href="#local-6989586621679025427"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025428"><span class="hs-identifier hs-type">fields</span></a><span>
</span><a name="line-151"></a><span>  </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">DEnum</span><span>   </span><a href="#local-6989586621679025430"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025431"><span class="hs-identifier hs-type">choices</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025432"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:/:</span><span> </span><a href="#local-6989586621679025430"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-type">DEnum</span></a><span>   </span><a href="#local-6989586621679025430"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025431"><span class="hs-identifier hs-type">choices</span></a><span>
</span><a name="line-152"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier hs-type">other</span><span>                 </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025434"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:/:</span><span> </span><a href="#local-6989586621679025435"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-identifier hs-type">rest</span></a><span> </span><a href="Mu.Schema.Definition.html#%3A%2F%3A"><span class="hs-operator hs-type">:/:</span></a><span> </span><a href="#local-6989586621679025435"><span class="hs-identifier hs-type">name</span></a><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span class="hs-comment">-- | Defines a mapping between two elements.</span><span>
</span><a name="line-155"></a><span class="hs-keyword">data</span><span> </span><a name="Mapping"><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier">Mapping</span></a></a><span>  </span><a name="local-6989586621679025420"><a href="#local-6989586621679025420"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679025421"><a href="#local-6989586621679025421"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679025420"><span class="hs-identifier hs-type">a</span></a><span> </span><a name="%3A-%3E"><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-operator">:-&gt;</span></a></a><span> </span><a href="#local-6989586621679025421"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-156"></a><span class="hs-comment">-- | Defines a set of mappings between elements of @a@ and @b@.</span><span>
</span><a name="line-157"></a><span class="hs-keyword">type</span><span> </span><a name="Mappings"><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier">Mappings</span></a></a><span> </span><a name="local-6989586621679025418"><a href="#local-6989586621679025418"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679025419"><a href="#local-6989586621679025419"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#Mapping"><span class="hs-identifier hs-type">Mapping</span></a><span> </span><a href="#local-6989586621679025418"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679025419"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">]</span><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-comment">-- | Finds the corresponding right value of @v@</span><span>
</span><a name="line-160"></a><span class="hs-comment">--   in a mapping @ms@. When the kinds are 'Symbol',</span><span>
</span><a name="line-161"></a><span class="hs-comment">--   return the same value if not found.</span><span>
</span><a name="line-162"></a><span class="hs-comment">--   When the return type is 'Type', return ' ()'</span><span>
</span><a name="line-163"></a><span class="hs-comment">--   if the value is not found.</span><span>
</span><a name="line-164"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><a name="MappingRight"><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier">MappingRight</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679025407"><a href="#local-6989586621679025407"><span class="hs-identifier">ms</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-type">Mappings</span></a><span> </span><a href="#local-6989586621679025406"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679025405"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679025408"><a href="#local-6989586621679025408"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679025406"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679025405"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-165"></a><span>  </span><span class="hs-identifier">MappingRight</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679025409"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679025409"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span>
</span><a name="line-166"></a><span>  </span><span class="hs-identifier">MappingRight</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679025410"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Type</span><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>  </span><span class="hs-identifier">MappingRight</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679025411"><span class="hs-identifier hs-type">v</span></a><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">TypeError</span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-string">&quot;Cannot find value &quot;</span><span> </span><span class="hs-special">'</span><span class="hs-operator hs-type">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">ShowType</span><span> </span><a href="#local-6989586621679025411"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span>
</span><a name="line-168"></a><span>  </span><span class="hs-identifier">MappingRight</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679025413"><span class="hs-identifier hs-type">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025414"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679025412"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679025413"><span class="hs-identifier hs-type">y</span></a><span>
</span><a name="line-169"></a><span>  </span><span class="hs-identifier">MappingRight</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">other</span><span>      </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025416"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679025417"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#MappingRight"><span class="hs-identifier hs-type">MappingRight</span></a><span> </span><a href="#local-6989586621679025416"><span class="hs-identifier hs-type">rest</span></a><span> </span><a href="#local-6989586621679025417"><span class="hs-identifier hs-type">x</span></a><span>
</span><a name="line-170"></a><span>
</span><a name="line-171"></a><span class="hs-comment">-- | Finds the corresponding left value of @v@</span><span>
</span><a name="line-172"></a><span class="hs-comment">--   in a mapping @ms@. When the kinds are 'Symbol',</span><span>
</span><a name="line-173"></a><span class="hs-comment">--   return the same value if not found.</span><span>
</span><a name="line-174"></a><span class="hs-comment">--   When the return type is 'Type', return ' ()'</span><span>
</span><a name="line-175"></a><span class="hs-comment">--   if the value is not found.</span><span>
</span><a name="line-176"></a><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><a name="MappingLeft"><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier">MappingLeft</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023553"><a href="#local-6989586621679023553"><span class="hs-identifier">ms</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#Mappings"><span class="hs-identifier hs-type">Mappings</span></a><span> </span><a href="#local-6989586621679023551"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679023552"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679023554"><a href="#local-6989586621679023554"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679023552"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679023551"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-177"></a><span>  </span><span class="hs-identifier">MappingLeft</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679023555"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679023555"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-identifier">MappingLeft</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679025397"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Symbol</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Type</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><span>  </span><span class="hs-identifier">MappingLeft</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679025398"><span class="hs-identifier hs-type">v</span></a><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">TypeError</span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">Text</span><span> </span><span class="hs-string">&quot;Cannot find value &quot;</span><span> </span><span class="hs-special">'</span><span class="hs-operator hs-type">:&lt;&gt;:</span><span> </span><span class="hs-special">'</span><span class="hs-identifier hs-type">ShowType</span><span> </span><a href="#local-6989586621679025398"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-identifier">MappingLeft</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#%3A-%3E"><span class="hs-operator hs-type">:-&gt;</span></a><span> </span><a href="#local-6989586621679025400"><span class="hs-identifier hs-type">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025401"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679025400"><span class="hs-identifier hs-type">y</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679025399"><span class="hs-identifier hs-type">x</span></a><span>
</span><a name="line-181"></a><span>  </span><span class="hs-identifier">MappingLeft</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">other</span><span>      </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025403"><span class="hs-identifier hs-type">rest</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679025404"><span class="hs-identifier hs-type">y</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#MappingLeft"><span class="hs-identifier hs-type">MappingLeft</span></a><span> </span><a href="#local-6989586621679025403"><span class="hs-identifier hs-type">rest</span></a><span> </span><a href="#local-6989586621679025404"><span class="hs-identifier hs-type">y</span></a><span>
</span><a name="line-182"></a><span>
</span><a name="line-183"></a><span class="hs-keyword">class</span><span> </span><a name="ReflectSchema"><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier">ReflectSchema</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023550"><a href="#local-6989586621679023550"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#Schema"><span class="hs-identifier hs-type">Schema</span></a><span> </span><a href="#local-6989586621679023548"><span class="hs-identifier hs-type">tn</span></a><span> </span><a href="#local-6989586621679023549"><span class="hs-identifier hs-type">fn</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-comment">-- | Reflect a schema into term-level.</span><span>
</span><a name="line-185"></a><span>  </span><a name="reflectSchema"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679023550"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Mu.Schema.Definition.html#SchemaB"><span class="hs-identifier hs-type">SchemaB</span></a><span> </span><span class="hs-identifier hs-type">TypeRep</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-186"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-187"></a><span>  </span><a name="local-8214565720323798419"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-188"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a><span> </span><a href="#local-6989586621679025922"><span class="hs-identifier hs-type">fields</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025923"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><a href="#local-6989586621679025924"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-189"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">DRecord</span><span> </span><a href="#local-6989586621679025923"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025922"><span class="hs-identifier hs-type">fields</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025924"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-190"></a><span>  </span><a name="local-8214565720323798419"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#DRecord"><span class="hs-identifier hs-var">DRecord</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025923"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-var">reflectFields</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025922"><span class="hs-identifier hs-type">fields</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-191"></a><span>                  </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025924"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-192"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a><span> </span><a href="#local-6989586621679025919"><span class="hs-identifier hs-type">choices</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025920"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><a href="#local-6989586621679025921"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-193"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">DEnum</span><span> </span><a href="#local-6989586621679025920"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025919"><span class="hs-identifier hs-type">choices</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025921"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-194"></a><span>  </span><a name="local-8214565720323798419"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#DEnum"><span class="hs-identifier hs-var">DEnum</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025920"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-var">reflectChoices</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025919"><span class="hs-identifier hs-type">choices</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-195"></a><span>                  </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025921"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-196"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025917"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><a href="#local-6989586621679025918"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-197"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectSchema"><span class="hs-identifier hs-type">ReflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">DSimple</span><span> </span><a href="#local-6989586621679025917"><span class="hs-identifier hs-type">ty</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025918"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-198"></a><span>  </span><a name="local-8214565720323798419"><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier">reflectSchema</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#DSimple"><span class="hs-identifier hs-var">DSimple</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025917"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-199"></a><span>                  </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectSchema"><span class="hs-identifier hs-var">reflectSchema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025918"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-keyword">class</span><span> </span><a name="ReflectFields"><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier">ReflectFields</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023547"><a href="#local-6989586621679023547"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a><span> </span><a href="#local-6989586621679023545"><span class="hs-identifier hs-type">tn</span></a><span> </span><a href="#local-6989586621679023546"><span class="hs-identifier hs-type">fn</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-202"></a><span>  </span><span class="hs-comment">-- | Reflect a list of fields into term-level.</span><span>
</span><a name="line-203"></a><span>  </span><a name="reflectFields"><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier">reflectFields</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679023547"><span class="hs-identifier hs-type">fs</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldDefB"><span class="hs-identifier hs-type">FieldDefB</span></a><span> </span><span class="hs-identifier hs-type">TypeRep</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-204"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-205"></a><span>  </span><a name="local-8214565720323798417"><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier">reflectFields</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-206"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025914"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025915"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a><span> </span><a href="#local-6989586621679025916"><span class="hs-identifier hs-type">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-207"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFields"><span class="hs-identifier hs-type">ReflectFields</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">FieldDef</span><span> </span><a href="#local-6989586621679025914"><span class="hs-identifier hs-type">name</span></a><span> </span><a href="#local-6989586621679025915"><span class="hs-identifier hs-type">ty</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025916"><span class="hs-identifier hs-type">fs</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-208"></a><span>  </span><a name="local-8214565720323798417"><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier">reflectFields</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#FieldDef"><span class="hs-identifier hs-var">FieldDef</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025914"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025915"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-209"></a><span>                  </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectFields"><span class="hs-identifier hs-var">reflectFields</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025916"><span class="hs-identifier hs-type">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-keyword">class</span><span> </span><a name="ReflectChoices"><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier">ReflectChoices</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023544"><a href="#local-6989586621679023544"><span class="hs-identifier">cs</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a><span> </span><a href="#local-6989586621679023543"><span class="hs-identifier hs-type">fn</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-212"></a><span>  </span><span class="hs-comment">-- | Reflect a list of enumeration choices into term-level.</span><span>
</span><a name="line-213"></a><span>  </span><a name="reflectChoices"><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier">reflectChoices</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679023544"><span class="hs-identifier hs-type">cs</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-type">ChoiceDef</span></a><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-214"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-215"></a><span>  </span><a name="local-8214565720323798415"><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier">reflectChoices</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-216"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025912"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a><span> </span><a href="#local-6989586621679025913"><span class="hs-identifier hs-type">cs</span></a><span class="hs-special">)</span><span>
</span><a name="line-217"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectChoices"><span class="hs-identifier hs-type">ReflectChoices</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-identifier hs-type">ChoiceDef</span><span> </span><a href="#local-6989586621679025912"><span class="hs-identifier hs-type">name</span></a><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025913"><span class="hs-identifier hs-type">cs</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-218"></a><span>  </span><a name="local-8214565720323798415"><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier">reflectChoices</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#ChoiceDef"><span class="hs-identifier hs-var">ChoiceDef</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025912"><span class="hs-identifier hs-type">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-219"></a><span>                   </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectChoices"><span class="hs-identifier hs-var">reflectChoices</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025913"><span class="hs-identifier hs-type">cs</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-keyword">class</span><span> </span><a name="ReflectFieldType"><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier">ReflectFieldType</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023542"><a href="#local-6989586621679023542"><span class="hs-identifier">ty</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a><span> </span><a href="#local-6989586621679023541"><span class="hs-identifier hs-type">tn</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-222"></a><span>  </span><span class="hs-comment">-- | Reflect a schema type into term-level.</span><span>
</span><a name="line-223"></a><span>  </span><a name="reflectFieldType"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679023542"><span class="hs-identifier hs-type">ty</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><span class="hs-identifier hs-type">TypeRep</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-224"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier hs-type">TNull</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-225"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TNull"><span class="hs-identifier hs-var">TNull</span></a><span>
</span><a name="line-226"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Typeable</span><span> </span><a href="#local-6989586621679025461"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier hs-type">TPrimitive</span></a><span> </span><a href="#local-6989586621679025461"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-227"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TPrimitive"><span class="hs-identifier hs-var">TPrimitive</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">typeRep</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025461"><span class="hs-identifier hs-type">ty</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#KnownName"><span class="hs-identifier hs-type">KnownName</span></a><span> </span><a href="#local-6989586621679025460"><span class="hs-identifier hs-type">nm</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier hs-type">TSchematic</span></a><span> </span><a href="#local-6989586621679025460"><span class="hs-identifier hs-type">nm</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-229"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TSchematic"><span class="hs-identifier hs-var">TSchematic</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#nameVal"><span class="hs-identifier hs-var">nameVal</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025460"><span class="hs-identifier hs-type">nm</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-230"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025459"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier hs-type">TOption</span></a><span> </span><a href="#local-6989586621679025459"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-231"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TOption"><span class="hs-identifier hs-var">TOption</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025459"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-232"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025458"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier hs-type">TList</span></a><span> </span><a href="#local-6989586621679025458"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-233"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TList"><span class="hs-identifier hs-var">TList</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025458"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-234"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025456"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025457"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span>
</span><a name="line-235"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier hs-type">TMap</span></a><span> </span><a href="#local-6989586621679025456"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679025457"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-236"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TMap"><span class="hs-identifier hs-var">TMap</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025456"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025457"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-237"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a><span> </span><a href="#local-6989586621679025455"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier hs-type">TUnion</span></a><span> </span><a href="#local-6989586621679025455"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-238"></a><span>  </span><a name="local-8214565720323798413"><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier">reflectFieldType</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#TUnion"><span class="hs-identifier hs-var">TUnion</span></a><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-var">reflectFieldTypes</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025455"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-239"></a><span>
</span><a name="line-240"></a><span class="hs-keyword">class</span><span> </span><a name="ReflectFieldTypes"><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier">ReflectFieldTypes</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679023540"><a href="#local-6989586621679023540"><span class="hs-identifier">ts</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a><span> </span><a href="#local-6989586621679023539"><span class="hs-identifier hs-type">tn</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-241"></a><span>  </span><span class="hs-comment">-- | Reflect a list of schema types into term-level.</span><span>
</span><a name="line-242"></a><span>  </span><a name="reflectFieldTypes"><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier">reflectFieldTypes</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Proxy</span><span> </span><a href="#local-6989586621679023540"><span class="hs-identifier hs-type">ts</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Mu.Schema.Definition.html#FieldTypeB"><span class="hs-identifier hs-type">FieldTypeB</span></a><span> </span><span class="hs-identifier hs-type">TypeRep</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-243"></a><span class="hs-keyword">instance</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-244"></a><span>  </span><a name="local-8214565720323798411"><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier">reflectFieldTypes</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-245"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Mu.Schema.Definition.html#ReflectFieldType"><span class="hs-identifier hs-type">ReflectFieldType</span></a><span> </span><a href="#local-6989586621679025453"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">,</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a><span> </span><a href="#local-6989586621679025454"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span>
</span><a name="line-246"></a><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Mu.Schema.Definition.html#ReflectFieldTypes"><span class="hs-identifier hs-type">ReflectFieldTypes</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">t</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679025454"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-247"></a><span>  </span><a name="local-8214565720323798411"><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier">reflectFieldTypes</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Mu.Schema.Definition.html#reflectFieldType"><span class="hs-identifier hs-var">reflectFieldType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025453"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">:</span><span> </span><a href="Mu.Schema.Definition.html#reflectFieldTypes"><span class="hs-identifier hs-var">reflectFieldTypes</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Proxy</span><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679025454"><span class="hs-identifier hs-type">ts</span></a><span class="hs-special">)</span><span>
</span><a name="line-248"></a></pre></body></html>